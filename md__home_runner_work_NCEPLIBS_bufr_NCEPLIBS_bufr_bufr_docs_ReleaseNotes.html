<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NCEPLIBS-bufr: Release Notes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NCEPLIBS-bufr
   &#160;<span id="projectnumber">12.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__home_runner_work_NCEPLIBS_bufr_NCEPLIBS_bufr_bufr_docs_ReleaseNotes.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Release Notes </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Detailed description of changes included within each new release.</p>
<h1><a class="anchor" id="autotoc_md12"></a>
Version 12.1.0 - July 10, 2024</h1>
<ul>
<li>Added support for IntelLLVM (OneAPI) compilers. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/538">Issue #538</a>]</li>
<li>Added logic to optimize decoding for the majority of data values which are encoded in 32 bits or less. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/pull/534">Issue #534</a>] [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/pull/543">Issue #543</a>]</li>
<li>Increased length limits for master table directory and filenames. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/533">Issue #533</a>]</li>
<li>Fixed some build issues related to Python interoperability. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/pull/524">Issue #524</a>] [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/537">Issue #537</a>]</li>
<li>Fixed a bug to ensure that any user input data values of NaN are encoded as "missing" in BUFR. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/pull/550">Issue #550</a>]</li>
<li>Modified the <a class="el" href="dumpdata_8F90.html#a20fa33f6e0fcb0816c4b070c73362539" title="Print a verbose listing of the contents of a data subset, including all data values and replicated se...">ufdump()</a> subroutine to print subset data values to their true scale precision, so that values with a non-positive scale factor will now display as integers, including when printed via the debufr utility. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/513">Issue #513</a>]</li>
<li>Added a new print verbosity level of 3 which can be activated when calling subroutine <a class="el" href="openclosebf_8F90.html#a9dc7e4fb476a5528a958ee132ee6392d" title="Connect a new file to the NCEPLIBS-bufr software for input or output operations, or initialize the li...">openbf()</a> with IO='QUIET'. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/pull/567">Issue #567</a>]</li>
<li>Added apxdx to project as new utility. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/585">Issue #585</a>]</li>
<li>Fixed a bug in subroutine <a class="el" href="openclosebf_8F90.html#a56b33c6538a8c0abf1b6a31584c68494" title="Store or restore parameters associated with a BUFR file.">rewnbf()</a> to ensure that it points to the correct subset in a BUFR message after a restore call. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/pull/599">Issue #599</a>]</li>
</ul>
<h1><a class="anchor" id="autotoc_md13"></a>
Version 12.0.1 - September 15, 2023</h1>
<ul>
<li>An extension was added to support the query interface for C++ IODA converters. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/519">Issue #519</a>]</li>
</ul>
<h1><a class="anchor" id="autotoc_md14"></a>
Version 12.0.0 - June 8, 2023</h1>
<ul>
<li>The library has been consolidated into a single build using 4-byte integers. It can still be linked to Fortran application codes which are compiled using 8-byte integers; however, such codes must now include a call to new subroutine <a class="el" href="x4884_8F90.html#a156e77d86141acd042efd97146dd18cf" title="Specify whether all integer arguments to NCEPLIBS-bufr subprograms from Fortran will use 8-byte integ...">setim8b()</a> with a value of .true. before making any calls to any other library routines. Furthermore, since all library functions which return integer values (e.g. <a class="el" href="s013vals_8F90.html#a28944a4d73587a3943964a95619cb8a2" title="Read a specified value from within Section 0 or Section 1 of a BUFR message.">iupbs01()</a>, <a class="el" href="arallocf_8F90.html#a4a77f5d91e7900692757350632f71ff0" title="Set a specified parameter to a specified value for use in dynamically allocating one or more internal...">isetprm()</a>, <a class="el" href="missing_8F90.html#a7dd66484c8bf4dd8d8e3791d02715e86" title="Check whether a real*8 data value returned from a previous call to any of the NCEPLIBS-bufr values-re...">ibfms()</a>) will now return 4-byte integer values, Fortran application codes which are compiled using 8-byte integers must now also explicitly declare such functions as 4-byte integers before calling them. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/78">Issue #78</a>]</li>
<li>The interface between the C and Fortran components of the library has been modernized. Accordingly, Fortran application codes must now contain a '<b>use <a class="el" href="namespacebufr__interface.html" title="Wrap C NCEPLIBS-bufr functions so they can be called from within Fortran application programs.">bufr_interface</a></b>' statement to directly call any C functions within the library, and C application codes must now contain an '<b>include "bufr_interface.h"</b>' preprocessor statement to directly call any Fortran or C functions within the library. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/79">Issue #79</a>]</li>
<li>Subroutines <a class="el" href="cftbvs_8F90.html#aa1388284ca8a4e435989e8a6eb551935" title="Given a mnemonic associated with a category 63 Table D descriptor from an NCEP prepbufr file,...">ufbqcd()</a> and <a class="el" href="cftbvs_8F90.html#abf6e01afd6c876d1319e25f9d591315b" title="Given an event program code, which is equivalent to the Y value of a category 63 Table D descriptor f...">ufbqcp()</a> have been modified to pass call arguments containing event program codes as integers, rather than continuing to pass them as real numbers. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/78">Issue #78</a>]</li>
<li>An extension was added to support the query interface for C++ IODA converters. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/451">Issue #451</a>]</li>
<li>Support for legacy EBCDIC platforms has been removed. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/266">Issue #266</a>]</li>
<li>The library has been patched to exit gracefully from subroutine <a class="el" href="readwritesb_8F90.html#ab4b6c52feffa76d2a4d8fab6e3547f3c" title="Read the next data subset from a BUFR message.">readsb()</a> if an erroneous delayed replication factor is read within subroutine <a class="el" href="readwritesb_8F90.html#a470af56bdf10d0b31292b0edac067597" title="Expand a subset template within internal arrays.">usrtpl()</a>. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/495">Issue #495</a>]</li>
<li>The library has been cleaned up to eliminate a number of compiler warnings. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/300">Issue #300</a>]</li>
<li>Documentation has been improved throughout the library, including the use of Doxygen-style docblocks for all program files. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/246">Issue #246</a>]</li>
</ul>
<h1><a class="anchor" id="autotoc_md15"></a>
Version 11.7.1 - August 26, 2022</h1>
<ul>
<li>More extensions were added to support the query interface for C++ IODA converters. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/225">Issue #225</a>]</li>
<li>Several internal routines were modified to allow the encoding and decoding of values larger than 32 bits. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/195">Issue #195</a>]</li>
</ul>
<h1><a class="anchor" id="autotoc_md16"></a>
Version 11.7.0 - May 19, 2022</h1>
<ul>
<li>Extensions were added to support a new query interface for C++ IODA converters. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/pull/198">Issue #198</a>]</li>
<li>Updates and bug fixes were made to several utility programs within the library package. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/141">Issue #141</a>]</li>
<li>A fix was made to prevent a line truncation error which occurs with certain compilers when the value of the MASTER_TABLE_DIR macro exceeds a certain length. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/182">Issue #182</a>]</li>
</ul>
<h1><a class="anchor" id="autotoc_md17"></a>
Version 11.6.0 - November 10, 2021</h1>
<ul>
<li>All of the library builds now use dynamic allocation, so the "_DA" suffix has now been correspondingly removed from the names of the library builds. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/77">Issue #77</a>]</li>
<li>The default BUFR master table version number for output BUFR messages was changed from 29 to 36 within subroutines <a class="el" href="compress_8F90.html#a3475e3a5a5079d96f47d2e49db98a1a6" title="Initialize a new BUFR message for output in compressed format.">cmsgini()</a>, <a class="el" href="dxtable_8F90.html#a30167b1b9b52074ad5db11d45665d551" title="Initialize a DX BUFR tables (dictionary) message, writing all the preliminary information into Sectio...">dxmini()</a> and <a class="el" href="readwritemg_8F90.html#ae5477034329440d4127a5243305b81e4" title="Initialize, within the internal arrays, a new uncompressed BUFR message for output.">msgini()</a>. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/142">Issue #142</a>]</li>
<li>The maximum length of a [path/]filename that can be passed into function <a class="el" href="bufr__interface_8h.html#a1a79689096002f6f3c125abc59c2143d" title="Open a new file for reading or writing BUFR messages via a C language interface.">cobfl()</a> was increased to 200 characters. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/174">Issue #174</a>]</li>
<li>Subroutine <a class="el" href="readwritesb_8F90.html#a178ebc9cfe70d3119632799fc3db25de" title="Jump forwards or backwards to a specified data subset within a BUFR file.">ufbpos()</a> was modified to allow it to work for all types of BUFR messages, including compressed messages. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/170">Issue #170</a>]</li>
<li>The library was modified to read up to 24 characters from the units field of BUFR master Table B files. Furthermore, in accordance with updated guidance from WMO, all fields within all BUFR master table files are now restricted to the CCITTIA5 character set. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/140">Issue #140</a>]</li>
<li>Subroutine jstchr and function rjust have been removed from the library, and their usage has been replaced with the Fortran intrinsic functions adjustl and adjustr. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/165">Issue #165</a>]</li>
<li>Several prototypes were added to the <a class="el" href="bufrlib_8h.html" title="Enable a number of NCEPLIBS-bufr subprograms to be called from within the C part of the library.">bufrlib.h</a> header file to enable further interoperability with C application programs. In addition, several existing prototypes were modified to use size_t when passing string lengths between Fortran and C. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/164">Issue #164</a>]</li>
</ul>
<h1><a class="anchor" id="autotoc_md18"></a>
Version 11.5.0 - April 26, 2021</h1>
<ul>
<li>Subroutine <a class="el" href="readwriteval_8F90.html#a4895b24addb0b3e23f5bd92fd891656e" title="Read or write an entire sequence of data values from or to a data subset.">ufbseq()</a> was modified for cases where the number of available levels exceeds the amount of user-provided array space when reading from an input file. Previously, the software would abort in such cases without returning any data whatsoever, but with the change it will now print a diagnostic and return with the number of levels equal to the amount of array space that was provided. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/52">Issue #52</a>]</li>
<li>Subroutine <a class="el" href="dumpdata_8F90.html#a20fa33f6e0fcb0816c4b070c73362539" title="Print a verbose listing of the contents of a data subset, including all data values and replicated se...">ufdump()</a> was modified to improve the logic for sequence tracking, and to increase the format width for integer code figure and bit number values when printing associated meaning strings. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/55">Issue #55</a>]</li>
<li>Subroutine <a class="el" href="dumpdata_8F90.html#ad4fdbfc4ae3890133d9204a881541a1a" title="Print a verbose listing of the contents of a data subset, including all data values and replicated se...">ufbdmp()</a> was modified to fix a bug when checking for the "missing" value in long character strings (i.e. longer than 8 bytes) and to enable printing of up to 120 characters for such strings. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/55">Issue #55</a>]</li>
<li>Subroutine <a class="el" href="readwriteval_8F90.html#aad0d9cae550b97bc950c739ff44ca6b2" title="Read a long character string (greater than 8 bytes) from a data subset.">readlc()</a> was modified to return a "missing" character string if the requested mnemonic isn't found in the subset. Previously, the subroutine would return a string of all blank characters in such cases. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/53">Issue #53</a>]</li>
<li>Subroutine <a class="el" href="readwriteval_8F90.html#aecfa08f631e1af46b472c007b93b2955" title="Write a long character string (greater than 8 bytes) to a data subset.">writlc()</a> was modified to print a warning message if the requested mnemonic isn't found in the subset definition. The library would previously abort in such cases. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/53">Issue #53</a>]</li>
<li>The default directory location of the BUFR master tables in subroutine <a class="el" href="misc_8F90.html#ab3f045cc170403305543e34e30b87001" title="Initialize numerous global variables and arrays within internal modules and COMMON blocks throughout ...">bfrini()</a> was changed from a fixed WCOSS-specific path. It is now set to the defined value of the MASTER_TABLE_DIR macro when the library was built. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/123">Issue #123</a>]</li>
<li>Subroutine <a class="el" href="readwritesb_8F90.html#a4b62a40d2c2860279670bf59a68e8204" title="Write a complete data subset into a BUFR message, and return each completed message within a memory a...">writsa()</a> was modified to allow the return of up to two BUFR messages during the same call to the subroutine, in the rare instances where more than one BUFR message could become available during such a call. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/54">Issue #54</a>]</li>
<li>Several internal Fortran variable declarations were modified for compatibility with GNU v10+ compilers. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/81">Issue #81</a>]</li>
<li>Subroutines pkx and chrtrn are no longer used within the library and were never intended to be called from application codes, so they have now been removed from the library. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/107">Issue #107</a>]</li>
</ul>
<h1><a class="anchor" id="autotoc_md19"></a>
Version 11.4.0 - November 20, 2020</h1>
<ul>
<li>A Python API was added to the library, for use with Python applications. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/61">Issue #61</a>]</li>
</ul>
<h1><a class="anchor" id="autotoc_md20"></a>
Version 11.3.2 - July 16, 2020</h1>
<ul>
<li>A user-friendly sanity check was added to subroutine <a class="el" href="openclosebf_8F90.html#a48a49bb82348400c1ba6af00c0138ab3" title="Close the connection between logical unit lunit and the NCEPLIBS-bufr software.">closbf()</a>, in case an application program is using a dynamic-allocation build of the library and calls this subroutine prior to calling subroutine <a class="el" href="openclosebf_8F90.html#a9dc7e4fb476a5528a958ee132ee6392d" title="Connect a new file to the NCEPLIBS-bufr software for input or output operations, or initialize the li...">openbf()</a>. The library would previously abort in such cases, but it will now just print a warning message. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/9">Issue #9</a>]</li>
</ul>
<h1><a class="anchor" id="autotoc_md21"></a>
Version 11.3.1 - March 3, 2020</h1>
<ul>
<li>Subroutine <a class="el" href="standard_8F90.html#a543c53880e96f04934213352ea77a7ab" title="Standardize a BUFR message.">stndrd()</a> was patched to fix an internal calculation for messages containing only one subset. [<a href="https://github.com/NOAA-EMC/NCEPLIBS-bufr/issues/51">Issue #51</a>]</li>
</ul>
<h1><a class="anchor" id="autotoc_md22"></a>
Version 11.3.0 - May 21, 2019</h1>
<ul>
<li>A bug was fixed in the bitmap processing, so that each Table A mnemonic in the jump/link table now tracks its own individual set of underlying Table C operators. This involved changes to function <a class="el" href="bitmaps_8F90.html#a2dd600ba6cd71e06a19d88956337781b" title="Check whether a subset element refers to a previous element within the same subset via an internal bi...">igetrfel()</a> and subroutines <a class="el" href="jumplink_8F90.html#af1d16fa71d84a333e3448d1081214d2f" title="Build and store the entire jump/link tree (including recursively resolving all &quot;child&quot; mnemonics) for...">tabsub()</a> and <a class="el" href="jumplink_8F90.html#ad12d047119fdcdeb97ffbced0696b9fb" title="Build the entire internal jump/link table within module moda_tables, using all of the internal BUFR t...">makestab()</a>.</li>
<li>The build script makebufrlib.sh was modified to remove calls to cpp (the C preprocessor) for all *.F Fortran files. Preprocessing for these files is now done by fpp (the Fortran preprocessor), which is automatically called by the Fortran compiler for all *.F files.</li>
<li>Global variable MXRST (the maximum number of long character strings that can be read from a subset of a compressed BUFR message) has now been added to the list of array size limits that can be configured using dynamic allocation.</li>
<li>The build script makebufrlib.sh was modified to stop generating the s_64 ("supersize") build. Such builds are now obsolete, since users can use the dynamic allocation builds to flexibly define whatever size limits they need for large BUFR datasets. If users need to recreate the exact specifications that were present in the previous s_64 build, they can do so using a dynamic allocation build and separate calls to subroutine <a class="el" href="arallocf_8F90.html#a4a77f5d91e7900692757350632f71ff0" title="Set a specified parameter to a specified value for use in dynamically allocating one or more internal...">isetprm()</a> to set MXLCC=12, MAXMEM=75000000, MXCDV=50000, MAXJL=128000, MAXSS=150000, MXMSGL=2500000 and MXRST=500 within their application program.</li>
<li>A new capability was added to read and process master code and flag tables. This feature is activated via an initial call to new subroutine <a class="el" href="mastertable_8F90.html#a4721c745ebeb6be54c825cd1f53ec107" title="Specify whether or not code and flag table information should be included during all future reads of ...">codflg()</a> at any time after the first call to subroutine <a class="el" href="openclosebf_8F90.html#a9dc7e4fb476a5528a958ee132ee6392d" title="Connect a new file to the NCEPLIBS-bufr software for input or output operations, or initialize the li...">openbf()</a>. Once that is done, then for any BUFR message read into the library via subroutine <a class="el" href="readwritemg_8F90.html#aad947e23951efbcba54930d6f309e0a8" title="Read the next BUFR message from logical unit abs(lunxx) into internal arrays.">readmg()</a>, <a class="el" href="readwritemg_8F90.html#aa2a7bf49cad422b474a24edd3a1cb232" title="Read a BUFR message from a memory array.">readerme()</a> or equivalent, and for any mnemonic contained within that message which is defined as a code or flag table, the user may call new subroutine <a class="el" href="cftbvs_8F90.html#af113e7ee7e2023cd466c2b28616cd64a" title="Decode the meaning of a numerical value from a code or flag table.">getcfmng()</a> with that mnemonic and an associated value (code figure or bit number) as input, and the subroutine will return the meaning (as a character string) corresponding to that mnemonic and associated value.</li>
<li>The default BUFR master table version number was changed from "13" to "29" within subroutines <a class="el" href="compress_8F90.html#a3475e3a5a5079d96f47d2e49db98a1a6" title="Initialize a new BUFR message for output in compressed format.">cmsgini()</a>, <a class="el" href="dxtable_8F90.html#a30167b1b9b52074ad5db11d45665d551" title="Initialize a DX BUFR tables (dictionary) message, writing all the preliminary information into Sectio...">dxmini()</a> and <a class="el" href="readwritemg_8F90.html#ae5477034329440d4127a5243305b81e4" title="Initialize, within the internal arrays, a new uncompressed BUFR message for output.">msgini()</a>.</li>
<li>The maximum number of delayed replication factors that can be passed in as input to subroutine <a class="el" href="readwriteval_8F90.html#a8a84d615371869d93f16c8617575dee2" title="Explicitly initialize delayed replication factors and allocate a corresponding amount of space within...">drfini()</a> was increased from 200 to 2000.</li>
<li>Subroutines <a class="el" href="readwritesb_8F90.html#a237f33069932c5fae473ac718c2eae9a" title="Write an uncompressed BUFR data subset.">msgupd()</a> and <a class="el" href="copydata_8F90.html#a9441a5be99c4a359ce4f2798037a2ea1" title="Copy a BUFR data subset from one unit to another within internal memory.">cpyupd()</a> were modified so that the IPRT verbosity must be greater than or equal to 1 in order for diagnostic alerts to be printed whenever BUFR subsets greater than 65535 bytes are written to their own output messages.</li>
<li>Function <a class="el" href="s013vals_8F90.html#ada4930358eb16c05c65c2df068db90c1" title="Convert a date-time with a 2-digit year (YYMMDDHH) to a date-time with a 4-digit year (YYYYMMDDHH) us...">i4dy()</a> was modified to change the window for converting 2-digit years to 4-digit years. The old window was 1921-2020, i.e. add 1900 to any 2-digit year greater than 20; otherwise add 2000. The new window will be 1941-2040, i.e. add 1900 to any 2-digit year greater than 40; otherwise add 2000.</li>
</ul>
<h1><a class="anchor" id="autotoc_md23"></a>
Version 11.2.0 - April 11, 2017</h1>
<ul>
<li>Support was added for the processing of 2-2X-255, 2-3X-255 and 2-4X-255 marker operators when reading BUFR messages, including when such operators are included in sequences within a BUFR DX table.</li>
<li>A new subroutine <a class="el" href="bitmaps_8F90.html#a867a81be072effc2a9d2de0d6031e264" title="Check whether a specified Table B mnemonic references another Table B mnemonic within the same data s...">gettagre()</a> was added which, given an element within a subset open for reading, determines if the element references another element within the same subset via an internal bitmap, and if so returns the referenced element along with its location in the subset.</li>
<li>A new function <a class="el" href="readwritemg_8F90.html#a87f1117bcbbc713c95bdca6f1bb1214c" title="Get the maximum length of a BUFR message that can be written to an output file by the NCEPLIBS-bufr s...">igetmxby()</a> was added which returns the maximum size of a BUFR message that can be written to any output stream by the BUFRLIB software. This value can then be modified via a subsequent call to subroutine <a class="el" href="readwritemg_8F90.html#a1c8cdc47f69010cd4eaa20710e28f53d" title="Specify the maximum length of a BUFR message that can be written to any output file by the NCEPLIBS-b...">maxout()</a>.</li>
<li>Subroutine <a class="el" href="dxtable_8F90.html#aa0b7269b3a7df645e6917bfd4ba72b32" title="Get information about a Table D descriptor from the internal DX BUFR tables.">nemtbd()</a> was modified to allow the last mnemonic in a sequence to be a "following value" mnemonic, for cases such as when it is being used as a coordinate descriptor and set to a value of "missing" to cancel a previous instance of the same descriptor.</li>
<li>A new subroutine <a class="el" href="readwriteval_8F90.html#ac8bbcb32a65a5acdf50e0f5d835c6ac2" title="Write a data value corresponding to a specific occurrence of a mnemonic within a data subset,...">setvalnb()</a> was added which searches for a specified mnemonic in a subset definition, then searches forward or backward from that point for a different mnemonic and sets the associated value as specified by the user. It can be useful in certain application codes which write BUFR output.</li>
<li>Subroutines <a class="el" href="readwritesb_8F90.html#a1dab1c658cb8511cfd1cc6a360221da8" title="Read the next uncompressed BUFR data subset into internal arrays.">rdtree()</a> and <a class="el" href="readwritesb_8F90.html#abb101b31fac13895d22320a918215372" title="Initialize a subset template within internal arrays.">rcstpl()</a> were modified to automatically identify certain cases where a decoded subset is corrupt and return this information to the application program via <a class="el" href="readwritesb_8F90.html#ab4b6c52feffa76d2a4d8fab6e3547f3c" title="Read the next data subset from a BUFR message.">readsb()</a> or <a class="el" href="readwritesb_8F90.html#aae33d6dd74331ba0a2a34ba22e8e56ab" title="Call subroutine readsb() and pass back its return code as the function value.">ireadsb()</a>, rather than continuing to try to decode the message which could in turn lead to a segmentation fault.</li>
<li>The build script makebufrlib.sh was updated to add a missing compiler option needed for compatibility with the Cray programming environment on the s_64 ("supersize") build.</li>
<li>A bug was fixed in subroutine <a class="el" href="openclosebf_8F90.html#ae88bf9794ed98ec79e9de0faff0093af" title="Read through every data subset in a BUFR file and return one or more specified data values from each ...">ufbtab()</a> which could occasionally lead to array maximums being exceeded and corrupted output when reading BUFR files.</li>
</ul>
<h1><a class="anchor" id="autotoc_md24"></a>
Version 11.1.0 - April 27, 2016</h1>
<ul>
<li>Subroutine <a class="el" href="compress_8F90.html#a6936aeb7f52ecaaa76047564005946d9" title="Write a compressed BUFR data subset.">wrcmps()</a> was modified to fix a bug involving the encoding of long character strings (via subroutine <a class="el" href="readwriteval_8F90.html#aecfa08f631e1af46b472c007b93b2955" title="Write a long character string (greater than 8 bytes) to a data subset.">writlc()</a>) into compressed messages which also contain delayed replication sequences.</li>
<li>Subroutine <a class="el" href="readwritesb_8F90.html#a237f33069932c5fae473ac718c2eae9a" title="Write an uncompressed BUFR data subset.">msgupd()</a> was modified to always call subroutine <a class="el" href="readwritesb_8F90.html#a470af56bdf10d0b31292b0edac067597" title="Expand a subset template within internal arrays.">usrtpl()</a>, even for overlarge subsets which don''t get written to the output stream. This ensures that such subsets are properly flushed from internal arrays.</li>
</ul>
<h1><a class="anchor" id="autotoc_md25"></a>
Version 11.0.2</h1>
<ul>
<li>The build script makebufrlib.sh was updated for compatibility with the Cray programming environment, along with module MODA_MSTABS and functions <a class="el" href="missing_8F90.html#a5f3cd824b4ddd60e635ec591d285b23f" title="Check whether a character string returned from a previous call to subroutine readlc() was encoded as ...">icbfms()</a> and <a class="el" href="misc_8F90.html#ac720bf9bc96336f8e4bf8120852f094e" title="Compute the number of characters needed to encode an integer as a string.">isize()</a>. All changes remain compatible with other supported environments.</li>
</ul>
<h1><a class="anchor" id="autotoc_md26"></a>
Version 11.0.1</h1>
<ul>
<li>Subroutines <a class="el" href="copydata_8F90.html#a9441a5be99c4a359ce4f2798037a2ea1" title="Copy a BUFR data subset from one unit to another within internal memory.">cpyupd()</a>, <a class="el" href="memmsgs_8F90.html#a4959c5f16b679cf4f90b2d5dcfe74247" title="Connect a new file to the NCEPLIBS-bufr software for input operations, then read the entire file cont...">ufbmem()</a>, <a class="el" href="memmsgs_8F90.html#a9072ba79bf636849068780fa6467282c" title="Connect a new file to the NCEPLIBS-bufr software for input operations, then read the entire file cont...">ufbmex()</a> and <a class="el" href="readwriteval_8F90.html#a62aacb5a102aaf1ee01deef68c63cdb8" title="Overwrite one or more data values within a data subset.">ufbovr()</a> were patched to include the proper declaration for IPRT, which is a global variable controlling the verbosity of diagnostic output.</li>
<li>Subroutine <a class="el" href="dumpdata_8F90.html#a20fa33f6e0fcb0816c4b070c73362539" title="Print a verbose listing of the contents of a data subset, including all data values and replicated se...">ufdump()</a> was modified to include level identifiers for event stacks in the print output.</li>
<li>Subroutine <a class="el" href="compress_8F90.html#a6936aeb7f52ecaaa76047564005946d9" title="Write a compressed BUFR data subset.">wrcmps()</a> was modified to fix a bug involving a variable that was not being saved between successive calls to this subroutine and which in rare cases could result in the loss of output subsets.</li>
</ul>
<h1><a class="anchor" id="autotoc_md27"></a>
Version 11.0.0 - April 27, 2015</h1>
<ul>
<li>A new subroutine <a class="el" href="tankrcpt_8F90.html#a9ae992beefc572ef3ae02a330b221ffa" title="Read the tank receipt time (if one exists) from Section 1 of a BUFR message.">rtrcptb()</a> was added which works just like subroutine <a class="el" href="tankrcpt_8F90.html#a5d6fa241d34622347252bf41b73d8610" title="Read the tank receipt time (if one exists) from Section 1 of a BUFR message.">rtrcpt()</a>, except that it operates on a BUFR message passed directly to it by a call argument, rather than on the last BUFR message that was indirectly read during the previous call to subroutine <a class="el" href="readwritemg_8F90.html#aad947e23951efbcba54930d6f309e0a8" title="Read the next BUFR message from logical unit abs(lunxx) into internal arrays.">readmg()</a>, <a class="el" href="memmsgs_8F90.html#a6bbcaf22a939d766b7de35ff855531c5" title="Read a specified BUFR message from internal arrays in memory, so that it is now in scope for processi...">readmm()</a>, <a class="el" href="readwritemg_8F90.html#aa2a7bf49cad422b474a24edd3a1cb232" title="Read a BUFR message from a memory array.">readerme()</a> or equivalent. Subroutine <a class="el" href="tankrcpt_8F90.html#a5d6fa241d34622347252bf41b73d8610" title="Read the tank receipt time (if one exists) from Section 1 of a BUFR message.">rtrcpt()</a> was correspondingly modified to now directly call <a class="el" href="tankrcpt_8F90.html#a9ae992beefc572ef3ae02a330b221ffa" title="Read the tank receipt time (if one exists) from Section 1 of a BUFR message.">rtrcptb()</a>, to avoid maintaining the same program logic within two different subroutines.</li>
<li>The maximum number of delayed replication factors that can be passed in as input to subroutine <a class="el" href="readwriteval_8F90.html#a8a84d615371869d93f16c8617575dee2" title="Explicitly initialize delayed replication factors and allocate a corresponding amount of space within...">drfini()</a> was increased from 100 to 200.</li>
<li>Subroutine <a class="el" href="readwriteval_8F90.html#a4895b24addb0b3e23f5bd92fd891656e" title="Read or write an entire sequence of data values from or to a data subset.">ufbseq()</a> was modified to fix a bug involving nesting of delayed replication sequences. The subroutine would fail to store data properly in cases where the inner-nested sequence was not present (i.e. zero replications) within the first replication of the outer sequence.</li>
<li>The makebufrlib.sh build script was modified to automatically extract the version number for the current build from the source of subroutine <a class="el" href="misc_8F90.html#a76aaeb3402158be94f735c166f93a527" title="Get the version number of the NCEPLIBS-bufr software.">bvers()</a>. Previously this information had been hardcoded in multiple lines of the script.</li>
<li>The default directory location of the BUFR master tables in subroutine <a class="el" href="misc_8F90.html#ab3f045cc170403305543e34e30b87001" title="Initialize numerous global variables and arrays within internal modules and COMMON blocks throughout ...">bfrini()</a> was changed from "/nwprod/fix" to "/nwprod/decoders/decod_shared/fix".</li>
<li>A new subroutine <a class="el" href="jumplink_8F90.html#a6ec2d1015cdc1315eb384ea92223e620" title="Get the scale factor, reference value and bit width associated with a specified occurrence of a Table...">nemspecs()</a> was added which returns the scale factor, reference value and bit width corresponding to a specified occurrence of a given mnemonic within a subset definition, including accounting for any Table C operators such as 2-01-YYY, 2-02-YYY, 2-03-YYY, 2-07-YYY, 2-08-YYY, etc. which may be in effect for that particular occurrence of the mnemonic.</li>
<li>A new subroutine <a class="el" href="dxtable_8F90.html#ad6352a1c1fdec4ba0adb0173781e4542" title="Get the element name and units associated with a Table B descriptor.">nemdefs()</a> was added which returns the element definition and units associated with a given mnemonic.</li>
<li>Global parameter MXIMB was removed from the BUFRLIB, and the corresponding logic within subroutine <a class="el" href="copydata_8F90.html#a4ced98b23d03cd8718d81b357ee4e2c5" title="Copy a specified number of bytes from one packed binary array to another.">mvb()</a> was simplified to mitigate the need for it.</li>
<li>Subroutines <a class="el" href="readwritesb_8F90.html#a237f33069932c5fae473ac718c2eae9a" title="Write an uncompressed BUFR data subset.">msgupd()</a>, <a class="el" href="copydata_8F90.html#a9441a5be99c4a359ce4f2798037a2ea1" title="Copy a BUFR data subset from one unit to another within internal memory.">cpyupd()</a> and <a class="el" href="copydata_8F90.html#a81eba6ff34f0a5020bf311ccf24d8efc" title="Copy a BUFR data subset from one Fortran logical unit to another.">copysb()</a> were modified to ensure that any subset larger than 65530 bytes is written to its own message in the output stream. This ensures that the subset byte count indicator, which is an NCEP local descriptor packed into 16 bits prior to each subset in a message, will not need to be relied upon in order to locate any subsequent subsets within the same message.</li>
<li>Global parameter MAXSS (the maximum number of data values that can be read from or written into a subset by the BUFRLIB software) was increased from 80000 to 120000.</li>
<li>Subroutine RDMSGB, which was rendered obsolete with the addition of the embedded C-language I/O upgrade in version 10.2.0, has been removed.</li>
<li>A logical call argument was added to subroutine <a class="el" href="cidecode_8F90.html#afef1c199ce8e69b085435b74d68cd337" title="Decode a character string from within a specified number of bytes of an integer array,...">upc()</a> to let the calling subprogram specify whether null characters should be converted to blanks. Previously, all null characters were converted to blanks by default.</li>
<li>New versions of all of the normal builds of BUFRLIB have been added which allow certain array sizes to be specified by the user at run time, with the corresponding arrays dynamically allocated at run time rather than statically allocated at compile time. The new builds contain the suffix "_DA" and can be used by application programs which need flexibility in defining size limits for certain outlier BUFR datasets. The size limits that can be modified are defined within new subroutine <a class="el" href="arallocf_8F90.html#a4a77f5d91e7900692757350632f71ff0" title="Set a specified parameter to a specified value for use in dynamically allocating one or more internal...">isetprm()</a>, which must itself be called prior to the first call to subroutine <a class="el" href="openclosebf_8F90.html#a9dc7e4fb476a5528a958ee132ee6392d" title="Connect a new file to the NCEPLIBS-bufr software for input or output operations, or initialize the li...">openbf()</a> for each new size limit that is to be modified from its default value. The corresponding arrays are then dynamically allocated during the subsequent first call to <a class="el" href="openclosebf_8F90.html#a9dc7e4fb476a5528a958ee132ee6392d" title="Connect a new file to the NCEPLIBS-bufr software for input or output operations, or initialize the li...">openbf()</a>. As part of this enhancement, numerous subprograms within BUFRLIB have been rewritten to share memory using FORTRAN modules rather than common blocks, and new conditional compilation flags have been incorporated into these subprograms as well as to the makebufrlib.sh build script. This allows the same source code and build script to be used for both dynamic allocation and static allocation builds. Note that application programs which don't have a need to redefine any default array size limits may continue to use the existing static allocation builds for maximum runtime efficiency.</li>
<li>A new subroutine pkx() was added which works just like subroutine <a class="el" href="ciencode_8F90.html#a8f795cd39c8f939b486407c65d8959c0" title="Encode an integer value within a specified number of bits of an integer array, starting at the bit im...">pkb()</a>, except that it properly handles cases where the input value NBITS is greater than the number of bits in a machine word.</li>
<li>Support was added for the processing of 2-2X, 2-3X and 2-4X non-marker operators when reading or writing BUFR messages, including when these operators are included in sequences within a BUFR DX table.</li>
<li>Subroutine <a class="el" href="bufrlib_8h.html#a4f4c37daea8a69385e280d60265f9d40" title="Store information about a standard Table D descriptor within internal DX BUFR tables.">stseq()</a> was modified to fix a bug involving the application of associated fields to Table D sequence descriptors.</li>
<li>Function <a class="el" href="missing_8F90.html#a5f3cd824b4ddd60e635ec591d285b23f" title="Check whether a character string returned from a previous call to subroutine readlc() was encoded as ...">icbfms()</a> was modified to improve the logic for identifying "missing" strings encoded as REAL*8 10E10 values prior to version 10.2.0 of the library.</li>
</ul>
<h1><a class="anchor" id="autotoc_md28"></a>
Version 10.2.5</h1>
<ul>
<li>Subroutine <a class="el" href="s013vals_8F90.html#a837bd14b4718718edb57b5f53c7bbcbe" title="Read through a BUFR file (starting from the beginning of the file) and return the message type (from ...">mesgbf()</a> was modified to ensure that the input BUFR file is always closed before exiting the subroutine.</li>
<li>Function <a class="el" href="bufr__interface_8h.html#a1a79689096002f6f3c125abc59c2143d" title="Open a new file for reading or writing BUFR messages via a C language interface.">cobfl()</a> was modified to allow up to 500 characters in the path of the filename being opened.</li>
<li>A declaration typo was fixed in subroutine <a class="el" href="blocks_8F90.html#a540b970b11e7da5147889d566c49b681" title="Encapsulate a BUFR message with IEEE Fortran control words as specified via the most recent call to s...">blocks()</a>.</li>
<li>Global parameter MAXNC (the maximum number of FXY descriptors that can be written into Section 3 of a BUFR message) was increased from 300 to 600.</li>
</ul>
<h1><a class="anchor" id="autotoc_md29"></a>
Version 10.2.4</h1>
<ul>
<li>Configuration files bufrlib.PRM and makebufrlib.sh were updated to generate a 4_32 build (4-byte REAL, 4-byte INT, 32-bit compilation) on the IBM CCS for version 10.2.3 of the BUFRLIB.</li>
</ul>
<h1><a class="anchor" id="autotoc_md30"></a>
Version 10.2.3 - June 21, 2013</h1>
<ul>
<li>Subroutine <a class="el" href="dxtable_8F90.html#a3c5a3be625c365b782f36c0cb772ae35" title="Read and parse a file containing a user-supplied DX BUFR table in character format,...">rdusdx()</a> was modified to prevent a segfault when trying to read DX dictionary information from an empty file.</li>
</ul>
<h1><a class="anchor" id="autotoc_md31"></a>
Version 10.2.2</h1>
<ul>
<li>Subroutine <a class="el" href="openclosebf_8F90.html#a9dc7e4fb476a5528a958ee132ee6392d" title="Connect a new file to the NCEPLIBS-bufr software for input or output operations, or initialize the li...">openbf()</a> was modified to fix a bug which caused a segfault in certain cases when appending to a BUFR file using the embedded C-language I/O.</li>
<li>Subroutines <a class="el" href="readwriteval_8F90.html#aad0d9cae550b97bc950c739ff44ca6b2" title="Read a long character string (greater than 8 bytes) from a data subset.">readlc()</a> and <a class="el" href="readwriteval_8F90.html#aecfa08f631e1af46b472c007b93b2955" title="Write a long character string (greater than 8 bytes) to a data subset.">writlc()</a> were modified to allow the input mnemonic string to be up to 14 characters when it contains a '#' condition code.</li>
</ul>
<h1><a class="anchor" id="autotoc_md32"></a>
Version 10.2.1</h1>
<ul>
<li>A bug was fixed in the embedded C-language I/O to account for the difference in index numbering between Fortran and C arrays.</li>
</ul>
<h1><a class="anchor" id="autotoc_md33"></a>
Version 10.2.0 - October 19, 2012</h1>
<ul>
<li>The makebufrlib.sh script was modified to streamline the endianness check and make it more portable.</li>
<li>Subroutine <a class="el" href="readwritesb_8F90.html#a2324e7f253ba3ad6209d7ab0fce5bc0e" title="Pack a BUFR data subset.">wrtree()</a> was modified to ensure that "missing" character strings are properly encoded with all bits set to 1.</li>
<li>A new function <a class="el" href="missing_8F90.html#a5f3cd824b4ddd60e635ec591d285b23f" title="Check whether a character string returned from a previous call to subroutine readlc() was encoded as ...">icbfms()</a> was added which tests whether decoded character strings are "missing" by checking if all of the equivalent bits are set to 1. This was done because, on certain platforms, the BUFRLIB REAL*8 "missing" value BMISS is not always equivalent to all bits set to 1 when viewed as a character string, and thus the existing BUFRLIB function <a class="el" href="missing_8F90.html#a7dd66484c8bf4dd8d8e3791d02715e86" title="Check whether a real*8 data value returned from a previous call to any of the NCEPLIBS-bufr values-re...">ibfms()</a> did not always work properly in such cases. However, users can continue to use the existing IBFMS function in application programs, because the new <a class="el" href="missing_8F90.html#a5f3cd824b4ddd60e635ec591d285b23f" title="Check whether a character string returned from a previous call to subroutine readlc() was encoded as ...">icbfms()</a> function has now been incorporated internally within the logic of many BUFRLIB subroutines, in addition to also being available for direct calling by application programs.</li>
<li>Subroutines <a class="el" href="readwritemg_8F90.html#aad947e23951efbcba54930d6f309e0a8" title="Read the next BUFR message from logical unit abs(lunxx) into internal arrays.">readmg()</a> and <a class="el" href="readwritemg_8F90.html#aa2a7bf49cad422b474a24edd3a1cb232" title="Read a BUFR message from a memory array.">readerme()</a> were modified to prevent the BUFRLIB from internally adjusting to DX (dictionary) table messages when Section 3 decoding is being used. Otherwise, contention can occur between the table information in the DX messages and the table information specified within the Section 3 descriptors. From now on, whenever Section 3 decoding is used (as specified by setting IO="SEC3" when opening a file via <a class="el" href="openclosebf_8F90.html#a9dc7e4fb476a5528a958ee132ee6392d" title="Connect a new file to the NCEPLIBS-bufr software for input or output operations, or initialize the li...">openbf()</a>), the BUFRLIB will now treat any DX (dictionary) table message the same as any other message and decode the actual data (i.e. table) values according to Section 3.</li>
<li>Subroutine <a class="el" href="openclosebf_8F90.html#a9dc7e4fb476a5528a958ee132ee6392d" title="Connect a new file to the NCEPLIBS-bufr software for input or output operations, or initialize the li...">openbf()</a> was modified to allow a new option for input call argument IO. If this argument is set to 'INUL', then the BUFRLIB will behave the same as when IO='IN', except that it will never try to actually read anything from the file attached to input call argument LUNIT. This can be useful for some special cases, such as when the user plans to pass input messages to the BUFRLIB using subsequent calls to subroutine <a class="el" href="readwritemg_8F90.html#aa2a7bf49cad422b474a24edd3a1cb232" title="Read a BUFR message from a memory array.">readerme()</a>.</li>
<li>A new subroutine <a class="el" href="jumplink_8F90.html#aff303b3e9951ce71da6c66ae5e0d76bf" title="Get the parent for a specified occurrence of a Table B or Table D mnemonic within a data subset defin...">gettagpr()</a> was added which returns the mnemonic corresponding to a parent sequence in a subset definition, given the mnemonic corresponding to a child descriptor within that sequence. This can be useful in certain application codes, especially when Section 3 decoding is being used.</li>
<li>A new function <a class="el" href="readwriteval_8F90.html#a10cd831e6dc0a773534c5c2787da56c8" title="Read a data value corresponding to a specific occurrence of a mnemonic within a data subset,...">getvalnb()</a> was added which searches for a specified mnemonic in a subset definition, then searches forward or backward from that point for a different mnemonic and returns the associated value. This can be useful in certain application codes, especially when Section 3 decoding is being used.</li>
<li>Functionality was added to improve the portability of reading and writing BUFR messages across different platforms. All calls to existing FORTRAN subroutines which read or write BUFR messages from disk (e.g. <a class="el" href="readwritemg_8F90.html#aad947e23951efbcba54930d6f309e0a8" title="Read the next BUFR message from logical unit abs(lunxx) into internal arrays.">readmg()</a>, <a class="el" href="memmsgs_8F90.html#a4959c5f16b679cf4f90b2d5dcfe74247" title="Connect a new file to the NCEPLIBS-bufr software for input operations, then read the entire file cont...">ufbmem()</a>, <a class="el" href="openclosebf_8F90.html#ae88bf9794ed98ec79e9de0faff0093af" title="Read through every data subset in a BUFR file and return one or more specified data values from each ...">ufbtab()</a>, <a class="el" href="readwritesb_8F90.html#aa2218d1cd25f8d558448bdc3061b3a04" title="Write a complete data subset into a BUFR message, for eventual output to logical unit lunit.">writsb()</a>, <a class="el" href="compress_8F90.html#a6936aeb7f52ecaaa76047564005946d9" title="Write a compressed BUFR data subset.">wrcmps()</a>, <a class="el" href="copydata_8F90.html#aedfe2559c1f9c59ec85c11993b378e7e" title="Copy a BUFR message from one file to another.">copymg()</a>, etc.) now use embedded C-language I/O to perform these tasks. Among other things, this means that any BUFR file can now be read regardless of whether it has been pre-blocked with FORTRAN control words using the cwordsh utility. For writing BUFR files, a new subroutine <a class="el" href="blocks_8F90.html#a552eedeacbddeccff86792eb99dad12f" title="Specify whether BUFR messages output by future calls to message-writing subroutines should be encapsu...">setblock()</a> was added which allows users to specify whether output BUFR messages are to be unblocked (which is the new default), big-endian blocked, or little-endian blocked.</li>
<li>A new subroutine <a class="el" href="missing_8F90.html#a65fba06ac4fb69670084ee11746bdd9f" title="Specify a customized value to represent &quot;missing&quot; data when reading from or writing to BUFR files.">setbmiss()</a> was added which allows users to specify a custom "missing" value for writing to and reading from BUFR files, rather than using the BUFRLIB default "missing" value of 10E10. A corresponding function <a class="el" href="missing_8F90.html#a2e6035695a459284e0592a2452b2f168" title="Get the current placeholder value which represents &quot;missing&quot; data when reading from or writing to BUF...">getbmiss()</a> was also added which returns the current "missing" value in use.</li>
</ul>
<h1><a class="anchor" id="autotoc_md34"></a>
Version 10.1.0 - June 11, 2012</h1>
<ul>
<li>Subroutine <a class="el" href="dumpdata_8F90.html#a20fa33f6e0fcb0816c4b070c73362539" title="Print a verbose listing of the contents of a data subset, including all data values and replicated se...">ufdump()</a> was modified to fix a bug when checking for the "missing" value in long character strings (i.e. longer than 8 bytes).</li>
<li>A new subroutine <a class="el" href="memmsgs_8F90.html#a9072ba79bf636849068780fa6467282c" title="Connect a new file to the NCEPLIBS-bufr software for input operations, then read the entire file cont...">ufbmex()</a> was added for use with certain application programs. <a class="el" href="memmsgs_8F90.html#a9072ba79bf636849068780fa6467282c" title="Connect a new file to the NCEPLIBS-bufr software for input operations, then read the entire file cont...">ufbmex()</a> functions similarly to <a class="el" href="memmsgs_8F90.html#a4959c5f16b679cf4f90b2d5dcfe74247" title="Connect a new file to the NCEPLIBS-bufr software for input operations, then read the entire file cont...">ufbmem()</a>, but has an additional return argument containing an array of message types corresponding to the array of messages that were read into internal memory.</li>
<li>Subroutines ADDATE, IUPBS1, IUPVS1, LJUST, LSTRPC, LSTRPS, SUBUPD, POSAPN and PARSEQ, which had been marked as obsolete within a previous version of BUFRLIB, have now been deleted.</li>
<li>Several global parameters were increased in "bufrlib.PRM". Specifically, MAXTBA (the maximum number of Table A entries for a BUFR file) was increased from 120 to 150, and MXDXTS (the maximum number of dictionary tables that can be stored for use with BUFR messages in internal memory) was increased from 10 to 200.</li>
<li>Subroutine <a class="el" href="jumplink_8F90.html#ac33dc42cbccbf054fa1c72b4bed5e90e" title="Search consecutive subset buffer segments for a conditional node.">conwin()</a> was modified to fix a bug and remove an obsolete call argument.</li>
<li>Subroutine <a class="el" href="compress_8F90.html#a6936aeb7f52ecaaa76047564005946d9" title="Write a compressed BUFR data subset.">wrcmps()</a> was modified to fix a bug involving embedded tables within a file of compressed BUFR messages.</li>
<li>Documentation was improved in many subroutines throughout the library.</li>
<li>Support has been added for the 2-03-YYY "change reference values" operator.</li>
<li>Subroutine <a class="el" href="readwritesb_8F90.html#a470af56bdf10d0b31292b0edac067597" title="Expand a subset template within internal arrays.">usrtpl()</a> was modified to fix a bug that was incorrectly using parameter MAXJL instead of parameter MAXSS when checking for overflow of an internal template array.</li>
<li>Subroutine <a class="el" href="dxtable_8F90.html#a81ea6d2408950b5728790bc8f8c80261" title="Generate one or more BUFR messages from the DX BUFR tables information associated with a given BUFR f...">wrdxtb()</a> was modified to prevent it from trying to store more than 255 Table A, Table B or Table D descriptors in a single DX dictionary message. The maximum value was set to 255 since regular 8-bit delayed replication is used to store descriptor information in these messages.</li>
<li>Subroutine <a class="el" href="jumplink_8F90.html#af1d16fa71d84a333e3448d1081214d2f" title="Build and store the entire jump/link tree (including recursively resolving all &quot;child&quot; mnemonics) for...">tabsub()</a> was modified to correctly generate the jump/link table for subsets where a Table C operator immediately follows a Table D sequence.</li>
</ul>
<h1><a class="anchor" id="autotoc_md35"></a>
Version 10.0.1</h1>
<ul>
<li>Subroutine <a class="el" href="openclosebf_8F90.html#a56b33c6538a8c0abf1b6a31584c68494" title="Store or restore parameters associated with a BUFR file.">rewnbf()</a> was modified to fix a bug which skipped the first data message after a file rewind.</li>
</ul>
<h1><a class="anchor" id="autotoc_md36"></a>
Version 10.0.0 - August 12, 2010</h1>
<ul>
<li>Subroutines PKVS1, OVRBS1, NMBYT, READIBM, IREADIBM, READFT, IREADFT and MOVA2I, which had been marked as obsolete within a previous version of BUFRLIB, have now been deleted.</li>
<li>A new global parameter MAXSS was defined for use as the maximum number of data values that can be read from or written into a single data subset by the BUFRLIB software. Previously, the separate global parameter MAXJL was used to define this limit. MAXJL will now be used solely to define the maximum number of internal jump/link table entries.</li>
<li>The size of a string declaration was increased within subroutine <a class="el" href="dxtable_8F90.html#a3c5a3be625c365b782f36c0cb772ae35" title="Read and parse a file containing a user-supplied DX BUFR table in character format,...">rdusdx()</a>.</li>
<li>Subroutine <a class="el" href="readwriteval_8F90.html#aad0d9cae550b97bc950c739ff44ca6b2" title="Read a long character string (greater than 8 bytes) from a data subset.">readlc()</a> was modified to enable the extraction of "long" (i.e. greater than 8 bytes) character strings from compressed messages. In addition, it is now possible to access all occurrences of such a string from within a given data subset, via the use of the new mnemonic condition character '#'. Previously, <a class="el" href="readwriteval_8F90.html#aad0d9cae550b97bc950c739ff44ca6b2" title="Read a long character string (greater than 8 bytes) from a data subset.">readlc()</a> could only ever access the first occurrence of any "long" character string from within a data subset.</li>
<li>Subroutine <a class="el" href="readwriteval_8F90.html#aecfa08f631e1af46b472c007b93b2955" title="Write a long character string (greater than 8 bytes) to a data subset.">writlc()</a> was modified to allow the writing of "long" (i.e. greater than 8 bytes) character strings within compressed messages. In addition, it is now possible to write all occurrences of such a string into a given data subset, via the use of the new mnemonic condition character '#'. Previously, <a class="el" href="readwriteval_8F90.html#aecfa08f631e1af46b472c007b93b2955" title="Write a long character string (greater than 8 bytes) to a data subset.">writlc()</a> could only ever locate and write the first occurrence of any "long" character string within a data subset.</li>
<li>Subroutine <a class="el" href="dumpdata_8F90.html#a20fa33f6e0fcb0816c4b070c73362539" title="Print a verbose listing of the contents of a data subset, including all data values and replicated se...">ufdump()</a> was modified to label each output level for sequences where the replication count is greater than 1. In addition, it will now output all occurrences of "long" (i.e. greater than 8 bytes) character strings from within a given data subset.</li>
<li>Subroutine <a class="el" href="compress_8F90.html#a1cb1b8bdef41e7ff3420a543e590fde8" title="Read the next compressed BUFR data subset into internal arrays.">rdcmps()</a> was modified to fix a bug which could cause the overflow of internal arrays when working with long character strings (i.e. longer than 8 bytes).</li>
<li>Subroutine <a class="el" href="jumplink_8F90.html#a32fa4aca38700d53dd9899f93b9b3636" title="Search for all occurrences of a specified node within a specified portion of the current data subset.">nvnwin()</a> was modified to fix a bug which could cause the overflow of an internal array during initialization on certain operating systems.</li>
<li>A new subroutine <a class="el" href="misc_8F90.html#a76aaeb3402158be94f735c166f93a527" title="Get the version number of the NCEPLIBS-bufr software.">bvers()</a> was added as a resource for managing and reporting library version numbers.</li>
<li>The fuzziness threshold in function <a class="el" href="missing_8F90.html#a7dd66484c8bf4dd8d8e3791d02715e86" title="Check whether a real*8 data value returned from a previous call to any of the NCEPLIBS-bufr values-re...">ibfms()</a> was increased for improved accuracy when testing for the BUFRLIB "missing" value.</li>
<li>A new subroutine <a class="el" href="s013vals_8F90.html#a6060b7b617646ee396097f20317e2f4d" title="Read a specified value from within Section 3 of a BUFR message.">iupbs3()</a> was added which unpacks specified values from Section 3, including subset counts and compression indicators. The same logic had been repeated within numerous existing subroutines throughout BUFRLIB and has now been consolidated into this single subroutine that can itself be called from wherever it is needed.</li>
<li>Subroutines <a class="el" href="readwritemg_8F90.html#aa2a7bf49cad422b474a24edd3a1cb232" title="Read a BUFR message from a memory array.">readerme()</a>, <a class="el" href="readwritemg_8F90.html#ac23041847910e299fa2c89962597a312" title="Read the next BUFR message from logical unit lunit as an array of integer words.">rdmsgw()</a> and RDMSGB were modified to prevent the overflow of an internal array for extremely large BUFR messages.</li>
<li>Subroutine <a class="el" href="s013vals_8F90.html#a7bf4d22f9bb27412a9d041f7a5d7bca6" title="Read the sequence of data descriptors contained within Section 3 of a BUFR message.">upds3()</a> was modified to pass in a new input argument containing the dimensioned size of the output array, in order to prevent the subroutine from possibly overflowing the array.</li>
<li>Subroutine <a class="el" href="readwritesb_8F90.html#a4b62a40d2c2860279670bf59a68e8204" title="Write a complete data subset into a BUFR message, and return each completed message within a memory a...">writsa()</a> was modified to pass in a new input argument containing the dimensioned size of the output array, in order to prevent the subroutine from possibly overflowing the array.</li>
<li>A new capability was added to BUFRLIB to enable the decoding of a BUFR message according to its data description section (Section 3). This is activated by setting IO="SEC3" when opening the file via subroutine <a class="el" href="openclosebf_8F90.html#a9dc7e4fb476a5528a958ee132ee6392d" title="Connect a new file to the NCEPLIBS-bufr software for input or output operations, or initialize the li...">openbf()</a>. Master tables containing all possible BUFR descriptors are also required, and these may be specified via a call to new subroutine <a class="el" href="mastertable_8F90.html#abf69490965212318f1dfee9b0bc4890c" title="Specify the directory location and Fortran logical unit numbers to be used when reading master BUFR t...">mtinfo()</a> or by using default values specified within subroutine <a class="el" href="misc_8F90.html#ab3f045cc170403305543e34e30b87001" title="Initialize numerous global variables and arrays within internal modules and COMMON blocks throughout ...">bfrini()</a>. If the default values are used, then FORTRAN logical unit numbers 98 and 99 will be allocated by the BUFRLIB for opening and reading the master tables. This new capability allows BUFR messages to be decoded without pre-defined DX dictionary files.</li>
<li>Subroutine <a class="el" href="memmsgs_8F90.html#a6bbcaf22a939d766b7de35ff855531c5" title="Read a specified BUFR message from internal arrays in memory, so that it is now in scope for processi...">readmm()</a> was re-written to directly call subroutine <a class="el" href="memmsgs_8F90.html#a379c2ad518735b00eecff6ddcf32b278" title="Read a specified BUFR message from internal arrays in memory, so that it is now in scope for processi...">rdmemm()</a> instead of duplicating all of the code logic in <a class="el" href="memmsgs_8F90.html#a379c2ad518735b00eecff6ddcf32b278" title="Read a specified BUFR message from internal arrays in memory, so that it is now in scope for processi...">rdmemm()</a>.</li>
<li>Subroutine <a class="el" href="cidecode_8F90.html#a07dda20577f7480095dff261d11241f8" title="Decode an integer value from within a specified number of bits of an integer array,...">upb()</a> was re-written to directly call subroutine <a class="el" href="cidecode_8F90.html#a243e1ab84f5a36179c0ac05056574257" title="Decode an integer value from within a specified number of bits of an integer array,...">upbb()</a> instead of duplicating all of the code logic in <a class="el" href="cidecode_8F90.html#a243e1ab84f5a36179c0ac05056574257" title="Decode an integer value from within a specified number of bits of an integer array,...">upbb()</a>.</li>
<li>Subroutine POSAPN has been marked as obsolete (for future removal from BUFRLIB). The same functionality can now be obtained via the use of subroutine <a class="el" href="openclosebf_8F90.html#aeef6f5d08d9631dbe92c1821a9d02903" title="Position an output BUFR file for appending.">posapx()</a>.</li>
<li>Subroutine <a class="el" href="compress_8F90.html#a6936aeb7f52ecaaa76047564005946d9" title="Write a compressed BUFR data subset.">wrcmps()</a> was modified to fix a bug involving the writing of compressed subsets which contain delayed replication. In certain situations, the values of two internal variables were not being properly saved between successive calls to the subroutine.</li>
<li>Changes were made so that the BUFRLIB will automatically read and adjust to any DX table (dictionary) messages internal to a file. Previously, the software would only ever process such messages at the beginning of a file, so that all subsequent data messages in that file were required to conform to these initial dictionary messages, and any subsequent dictionary messages in the file were simply ignored. Now, any subsequent dictionary messages will cause the BUFRLIB to adjust its internal processing tables and treat all subsequent data messages as conforming to these new dictionary messages, up through the end of the file or until yet another set of dictionary messages is encountered. These changes affect all BUFRLIB subroutines which read BUFR messages from a file, including <a class="el" href="readwritemg_8F90.html#aad947e23951efbcba54930d6f309e0a8" title="Read the next BUFR message from logical unit abs(lunxx) into internal arrays.">readmg()</a>, <a class="el" href="readwritemg_8F90.html#ae023a7cc381f488ac7669dc3e3ee8236" title="Call subroutine readmg() and pass back its return code as the function value.">ireadmg()</a>, <a class="el" href="memmsgs_8F90.html#a6bbcaf22a939d766b7de35ff855531c5" title="Read a specified BUFR message from internal arrays in memory, so that it is now in scope for processi...">readmm()</a>, <a class="el" href="memmsgs_8F90.html#afa09c66c60b22359e9642fa6eee8fcbb" title="Call subroutine readmm() and pass back its return code as the function value.">ireadmm()</a>, <a class="el" href="memmsgs_8F90.html#a379c2ad518735b00eecff6ddcf32b278" title="Read a specified BUFR message from internal arrays in memory, so that it is now in scope for processi...">rdmemm()</a>, <a class="el" href="readwritesb_8F90.html#aeb1fdb4af8ca100d3d80c52a221f1de8" title="Read the next data subset from a BUFR file.">readns()</a> and <a class="el" href="readwritesb_8F90.html#a8a621b1996440ed233c796e49c8971f3" title="Call subroutine readns() and pass back its return code as the function value.">ireadns()</a>.</li>
<li>Subroutine ADDATE has been marked as obsolete (for future removal from BUFRLIB) since it is no longer called by any BUFRLIB routines. The same functionality can now be obtained via the use of subroutine W3MOVDAT in the NCEP W3 library.</li>
<li>Subroutine SUBUPD has been marked as obsolete (for future removal from BUFRLIB) since it is no longer called by any BUFRLIB routines and is almost an exact replica of subroutine <a class="el" href="readwritesb_8F90.html#a237f33069932c5fae473ac718c2eae9a" title="Write an uncompressed BUFR data subset.">msgupd()</a>. The same functionality can now be obtained via the use of subroutine <a class="el" href="readwritesb_8F90.html#a237f33069932c5fae473ac718c2eae9a" title="Write an uncompressed BUFR data subset.">msgupd()</a>.</li>
<li>A new logical function <a class="el" href="readwritemg_8F90.html#a47d4a63b5e7276a90eee0ce83237cb60" title="Check whether the current data subset in the internal arrays will fit within the current BUFR message...">msgfull()</a> was added which determines whether there is enough room to store the current data subset within the current BUFR message for output. The same logic had been repeated within numerous existing subroutines throughout BUFRLIB and has now been consolidated into this single subroutine that can itself be called from wherever it is needed.</li>
<li>A new capability was added to BUFRLIB to allow it to append a tank receipt time to Section 1 within all future BUFR messages written to output by subroutines <a class="el" href="readwritesb_8F90.html#aa2218d1cd25f8d558448bdc3061b3a04" title="Write a complete data subset into a BUFR message, for eventual output to logical unit lunit.">writsb()</a>, <a class="el" href="copydata_8F90.html#aedfe2559c1f9c59ec85c11993b378e7e" title="Copy a BUFR message from one file to another.">copymg()</a> or equivalent. The tank receipt time is a local extension to Section 1; however, its inclusion in a message is still fully compliant with the WMO BUFR regulations. This new capability is activated via an initial call to new subroutine <a class="el" href="tankrcpt_8F90.html#a24ba916e2d398ca162381b0d8b3f54fe" title="Specify a tank receipt time to be included within Section 1 of all BUFR messages output by future cal...">strcpt()</a>, specifying the time to be appended to Section 1 within all future BUFR messages written to output. This same information can then be read back from an input BUFR message via a call to new subroutine <a class="el" href="tankrcpt_8F90.html#a5d6fa241d34622347252bf41b73d8610" title="Read the tank receipt time (if one exists) from Section 1 of a BUFR message.">rtrcpt()</a>.</li>
<li>Subroutine <a class="el" href="fxy_8F90.html#ab6ec8c0148ab5d70923831667277b14e" title="Get information about a descriptor, based on the WMO bit-wise representation of an FXY value.">numtab()</a> was re-written to directly call subroutine <a class="el" href="fxy_8F90.html#aca1fae67e284131dfd240d2336e3e77d" title="Get information about a Table B or Table D descriptor, based on the WMO bit-wise representation of an...">numtbd()</a> instead of duplicating all of the code logic in <a class="el" href="fxy_8F90.html#aca1fae67e284131dfd240d2336e3e77d" title="Get information about a Table B or Table D descriptor, based on the WMO bit-wise representation of an...">numtbd()</a>.</li>
<li>Subroutine <a class="el" href="dxtable_8F90.html#a36f644b9119ebf87f957bfe023e5cc45" title="Get information about a Table A descriptor from the internal DX BUFR tables.">nemtba()</a> was re-written to directly call subroutine <a class="el" href="dxtable_8F90.html#a8ea33660d62d74dee92cf7bf9541c1cd" title="Get information about a Table A descriptor from the internal DX BUFR tables.">nemtbax()</a> instead of duplicating all of the code logic in <a class="el" href="dxtable_8F90.html#a8ea33660d62d74dee92cf7bf9541c1cd" title="Get information about a Table A descriptor from the internal DX BUFR tables.">nemtbax()</a>.</li>
<li>Documentation was improved within numerous subroutines throughout BUFRLIB, including the addition of docblocks where none previously existed.</li>
<li>The default BUFR master table version number was changed from "12" to "13" within subroutines <a class="el" href="compress_8F90.html#a3475e3a5a5079d96f47d2e49db98a1a6" title="Initialize a new BUFR message for output in compressed format.">cmsgini()</a>, <a class="el" href="dxtable_8F90.html#a30167b1b9b52074ad5db11d45665d551" title="Initialize a DX BUFR tables (dictionary) message, writing all the preliminary information into Sectio...">dxmini()</a> and <a class="el" href="readwritemg_8F90.html#ae5477034329440d4127a5243305b81e4" title="Initialize, within the internal arrays, a new uncompressed BUFR message for output.">msgini()</a>.</li>
<li>A new capability was added to allow BUFRLIB print diagnostics and other runtime messages to be redirected somewhere other than the default FORTRAN logical unit 6 (i.e. standard output). This is enabled within an application program by supplying an in-line version of subroutine <a class="el" href="errwrt_8F90.html#a9c4c22af6c77235db8ddd7f41594f543" title="Specify a custom location for the logging of error and diagnostic messages generated by the NCEPLIBS-...">errwrt()</a> to override the new default version of this subroutine provided within the BUFRLIB. The default version will continue to write to standard output when included within a compilation.</li>
<li>Subroutines <a class="el" href="compress_8F90.html#a3475e3a5a5079d96f47d2e49db98a1a6" title="Initialize a new BUFR message for output in compressed format.">cmsgini()</a>, <a class="el" href="standard_8F90.html#a543c53880e96f04934213352ea77a7ab" title="Standardize a BUFR message.">stndrd()</a> and <a class="el" href="readwritemg_8F90.html#af49a08bdf36b69217da7571dcfc90624" title="Perform final checks and updates on a BUFR message before writing it to a specified Fortran logical u...">msgwrt()</a> were modified to remove a logical error which assumed that any message whose data section (Section 4) was compressed was also fully standard. In reality, the use of compression only implies that the data section is fully standard and does not necessarily imply that the data description section (Section 3) is also fully standard. BUFRLIB will now address the standardization of Section 3 solely within subroutine <a class="el" href="standard_8F90.html#a543c53880e96f04934213352ea77a7ab" title="Standardize a BUFR message.">stndrd()</a>, independent of whether or not the data in Section 4 are compressed.</li>
<li>Functions LSTRPC and LSTRPS have been marked as obsolete (for future removal from BUFRLIB). The same functionality can now be obtained via the use of function <a class="el" href="jumplink_8F90.html#a46ebb8c05619d2580397218ff36f4a9b" title="Search backwards, beginning from a given node within the jump/link table, until finding the most rece...">lstjpb()</a>.</li>
<li>Subroutine <a class="el" href="openclosebf_8F90.html#ae88bf9794ed98ec79e9de0faff0093af" title="Read through every data subset in a BUFR file and return one or more specified data values from each ...">ufbtab()</a> was modified to fix a bug involving the unpacking of character strings which are identical within each subset of a single compressed BUFR message.</li>
</ul>
<h1><a class="anchor" id="autotoc_md37"></a>
May 28, 2008</h1>
<ul>
<li>Subroutine BORT_EXIT was modified to fix a faulty ANSI-C declaration. This had been silently ignored by the IBM CCS compiler but was a portability issue for other compilers.</li>
<li>Subroutines RDTREE and WRTREE were modified to fix a bug which, on rare occasions, caused a segmentation fault due to overflow of internal arrays. This bug only occurred when working with long character strings (i.e. longer than 8 bytes) while using a non-optimized compilation of BUFRLIB.</li>
<li>Subroutine WRITCA, which had been marked as obsolete within a previous version of BUFRLIB, has now been deleted.</li>
<li>A new subroutine PARSTR was added which works like existing subroutine PARSEQ, except that it allows substrings within a string to be separated by one or more occurrences of any given single character (and not just by one or more blank characters). As such, the existing subroutine PARSEQ has been marked as obsolete (for future removal from BUFRLIB), and many other subroutines throughout BUFRLIB have been modified to now use the new subroutine PARSTR.</li>
<li>Subroutine JSTCHR was modified to add a return argument indicating whether the input string was empty. This allows the subroutine to be used in any context where existing subroutine LJUST was being used, and LJUST has now been marked as obsolete (for future removal from BUFRLIB).</li>
<li>Several new subroutines have been added to enable the capability to read BUFR table information from external ASCII master tables instead of from pre-defined DX dictionary files. This is in preparation for the planned future capability to be able to directly decode a BUFR message according to its internal data description section.</li>
<li>The value BMISS (i.e. the BUFR "missing" value), which was defined as a local data value within many separate subroutines, has now been defined as a global parameter within the "bufrlib.PRM" include file. In addition, a new function IBFMS has been added which safely tests a given value to determine whether or not it is "missing", and several existing subroutines throughout BUFRLIB have been modified to now use this new function.</li>
<li>The determination as to whether the local host machine uses the "big-endian" or "little-endian" byte-ordering scheme is now determined at compile time and integrated into BUFRLIB via the use of conditional compilation statements. This allows BUFRLIB to run much more efficiently since it no longer has to constantly re-check the local byte-ordering scheme at run time.</li>
<li>Subroutine DXDUMP was modified to correct a bug which caused the truncation of output reference values longer than 8 digits.</li>
<li>Several global parameters were increased in "bufrlib.PRM". Specifically, MXCDV (the maximum number of data values per subset in a compressed BUFR message) was increased from 2000 to 3000, and MAXMEM (the maximum number of bytes that can be used to store BUFR messages within internal memory) was increased from 50Mb to 75Mb within the "supersized" BUFRLIB.</li>
</ul>
<h1><a class="anchor" id="autotoc_md38"></a>
February 6, 2007</h1>
<ul>
<li>Several global parameters were increased in "bufrlib.PRM". Specifically, MAXTBA, MAXTBB and MAXTBD (the maximum numbers of internal Table A, B and D entries, respectively) were increased from 60, 250 and 250 to 120, 500 and 500, respectively, and MAXJL (the maximum number of internal jump/link table entries) was increased from 16000 to 20000.</li>
<li>Subroutine CKTABA was modified to allow "FRtttsss" and "FNtttsss" (where ttt is the message type and sss is the message subtype) as valid Table A mnemonics for foreign BUFR messages. Previously, only "NCtttsss" had been allowed.</li>
<li>Subroutines GETS1LOC and IUPBS01 were modified to provide two additional options for unpacking values from Section 1 of a BUFR message. Specifically, "CENT" now unpacks the century and "YCEN" now unpacks the year of the century.</li>
<li>Subroutine PKBS1 was modified to provide several additional options for directly packing values into Section 1 of a BUFR message. Specifically, "YEAR", "MNTH", "DAYS", "HOUR", "CENT" and "YCEN" now pack the message year, month, day, hour, century and year of century, respectively, and "MTYP" and "MSBT" now pack the message type and subtype, respectively.</li>
<li>Subroutine MAXOUT was modified to allow it to be called with a special flag value of "0", indicating that output BUFR messages should be set to the maximum allowable record length. In addition, a sanity check was added to prevent this record length from being set to a value greater than the maximum allowable.</li>
<li>For the printing of flag table values, subroutines UFBDMP and UFDUMP were modified to include an equivalent listing of the bits that were actually set.</li>
<li>Subroutine UFBPOS was modified to remove an unnecessary (and incorrect!) initialization statement. This had been silently ignored by the IBM CCS compiler but was a portability issue for other compilers.</li>
<li>Subroutine UFBTAB was modified to add a required declaration for a local character variable. This had been silently ignored by the IBM CCS compiler but was a portability issue for other compilers.</li>
<li>Subroutine RDUSDX was modified to abort if it encounters a user-defined BUFR message whose message type is set to 11. This value is reserved for internal dictionary messages.</li>
</ul>
<h1><a class="anchor" id="autotoc_md39"></a>
January 31, 2006</h1>
<ul>
<li>Documentation was improved and/or clarified within many existing routines throughout BUFRLIB.</li>
<li>Global parameter MAXMEM (the maximum number of bytes that can be used to store BUFR messages internally) was increased from 16Mb to 50Mb, and global parameter MAXTBA (the maximum number of entries in the internal BUFR Table A) was increased from 50 to 60. In addition, all global parameters were moved into a new global INCLUDE file "bufrlib.PRM", rather than continuing to hardcode the same parameter values in every individual source file where they were needed. This will allow future changes to any of these parameter values to be made much more easily.</li>
<li>An additional CCS compilation of BUFRLIB (libbufr_s_64.a) is now being maintained via the makefile. This new version is identical to the existing libbufr_4_64.a compilation, except that several parameter values within "bufrlib.PRM" are set much larger in order to allow extremely large BUFR messages (i.e. up to 2.5Mb) to be processed.</li>
<li>The capability to compress output BUFR messages has now been directly incorporated into subroutines WRITSB and WRITSA, whereas previously it had been necessary to instead call the separate subroutines WRITCP and WRITCA, respectively. The use of compression can now be easily toggled on or off (with "off" as the default if left unspecified) via new subroutine CMPMSG. As such, subroutine WRITCA has now been marked as obsolete (for future removal from BUFRLIB), since the same functionality can now be obtained by calling the new subroutine CMPMSG, followed by a call to WRITSA. In a similar manner, WRITCP has now been modified to directly call subroutines CMPMSG and WRITSB, although it is being retained as a distinct subroutine within BUFRLIB (rather than also being marked as obsolete) out of consideration for the large number of existing application programs which use it.</li>
<li>A new function IUPBS01 was added which works like existing function IUPBS1, except that it uses a descriptive mnemonic rather than a hardcoded byte number in order to specify the value to be unpacked from Section 0 or Section 1 of a BUFR message. This allows the same function call to work on messages encoded using either BUFR edition 3 or BUFR edition 4 (rather than having to pass in different byte numbers depending on the edition!), and it also allows values encoded across multiple bytes (e.g. section lengths, 4-digit years, etc.) to be easily unpacked as well. As such, the existing function IUPBS1 has been marked as obsolete (for future removal from BUFRLIB), and many other subroutines throughout BUFRLIB (e.g. UPDS3, DATEBF, DUMPBF, STNDRD, CKTABA, NMBYT, MSGWRT, RDBFDX, etc.) have been modified to now use the new function IUPBS01. In addition, a new function IUPVS01 was added which calls IUPBS01 in an in-line fashion, and existing function IUPVS1 (which had similarly called IUPBS1 in an in-line fashion) has now been marked as obsolete.</li>
<li>A new subroutine PKVS01 was added which works like existing subroutine PKVS1, except that it uses a descriptive mnemonic rather than a hardcoded byte number in order to specify the value to be stored into Section 0 or Section 1 of all future output BUFR messages. This allows the same subroutine call to work on messages encoded using either BUFR edition 3 or BUFR edition 4 (rather than having to pass in different byte numbers depending on the edition!), and it also allows values encoded across multiple bytes (e.g. 4-digit years, originating centers and subcenters, etc.) to be easily overwritten as well. As such, the existing subroutine PKVS1 has been marked as obsolete (for future removal from BUFRLIB). In a similar manner, a new subroutine PKBS1 was also added to replace existing subroutine OVRBS1, which has now itself also been marked as obsolete.</li>
<li>A new subroutine CNVED4 was added which, given a BUFR message encoded using BUFR edition 3, creates and outputs an equivalent message encoded using BUFR edition 4. This subroutine can be called by an application program, or it can alternatively be activated in an in-line fashion via a call to new subroutine PKVS01 using the descriptive mnemonic "BEN" (i.e. BUFR edition number) with a corresponding value of "4".</li>
<li>Subroutines NEMTAB, NUMTAB, TABENT and TABSUB were modified to support the Table C operators 2-07-YYY and 2-08-YYY, which are new to BUFR with the advent of edition 4.</li>
<li>Subroutines COPYST, WRITST and STANDARD, which had been marked as obsolete within a previous version of BUFRLIB, have now been deleted.</li>
<li>The default BUFR master table version number was changed from "4" to "12" within subroutines CMSGINI, DXMINI and MSGINI.</li>
<li>A bug was corrected in subroutine STNDRD in order to ensure that byte 4 of Section 4 is always properly zeroed out.</li>
<li>A bug was corrected in subroutine PARUTG which was preventing 1-bit delayed replication factors from being directly read via a call to subroutine UFBINT.</li>
<li>A bug was corrected in subroutine WRCMPS which was causing a character compression array to be improperly initialized. In addition, a local parameter was increased to allow up to 4000 subsets to be written into a single compressed BUFR message.</li>
<li>Subroutine UFBMEM was modified to not abort when there are either too many messages read in or too many bytes read in (i.e., .gt. array limits passed in), but rather to just process the limiting number of messages and/or bytes and print a diagnostic.</li>
<li>Subroutine CLOSMG was modified to override logic that had always written out messages 1 and 2 even when they contained zero subsets (it assumed these contained the dump center and processing time in Section 1). Now, if the unit number argument is passed in as a negative number the first time this routine is called by an application program, ALL empty messages are skipped (i.e., assumes that messages 1 and 2 do not contain dump center and processing time). This remains set for all subsequent calls to CLOSMG for a particular file, regardless of the sign of the unit number (CLOSMG is called by other BUFRLIB routines which always pass in a positive unit number).</li>
<li>A new function IGETDATE was added which unpacks and returns the Section 1 date-time from an input BUFR message, in format of either YYYYMMDDHH or YYMMDDHH depending on the value requested via the most recent call to subroutine DATELEN. The same logic had been repeated within numerous existing subroutines throughout BUFRLIB and has now been consolidated into this single subroutine that can itself be called from wherever it is needed.</li>
<li>A new subroutine GETLENS was added which unpacks and returns the individual section lengths from an input BUFR message. The same logic had been repeated within numerous existing subroutines throughout BUFRLIB and has now been consolidated into this single subroutine that can itself be called from wherever it is needed.</li>
<li>A new subroutine RDMSGW was added which reads the next padded BUFR message from a given BUFR file. The same logic had been repeated within numerous existing subroutines throughout BUFRLIB and has now been consolidated into this single subroutine that can itself be called from wherever it is needed.</li>
<li>A new function PKFTBV was added which computes and returns the value equivalent to the setting of a specified bit within a flag table of a specified width. In addition, a new subroutine UPFTBV was also added which functions as the logical inverse, i.e. given a mnemonic and corresponding flag table value, it computes and returns the equivalent bit settings.</li>
<li>A new subroutine UFBPOS, which allows a user to directly point at and read a specified subset from within a specified message in an input BUFR file, was added to BUFRLIB. Previously, this logic existed as an in-line subroutine within a separate application program.</li>
<li>A new subroutine GETABDB, which returns internal BUFR table information in a pre-defined ASCII format, was added to BUFRLIB. Previously, this logic existed as an in-line subroutine within a separate application program.</li>
<li>Subroutine READMG was modified to be able to handle BUFR messages which are not padded out to an 8-byte boundary and for which it had therefore previously been necessary to instead call the separate subroutine READIBM. Logic was also added to allow the option of having READMG behave like the separate subroutine READFT, so that it will not abort when a read error is encountered but rather will treat it the same as an end-of-file condition. This option is activated by passing in the negative of the usual logical unit number. In summary, READMG can now itself properly read from any FORTRAN-blocked file of BUFR messages, and therefore the existing subroutines READIBM, IREADIBM, READFT and IREADFT have now all been marked as obsolete (for future removal from BUFRLIB).</li>
<li>A set of generic C-language functions for reading/writing BUFR messages from/to generic BUFR files (which may or may not contain FORTRAN-blocking and/or message padding) was added to BUFRLIB. These functions (CCBFL, COBFL, CRBMG, CWBMG and RBYTES) are primarily intended for use by separate application programs (such as cwordsh), but are themselves being directly incorporated into BUFRLIB in order to prevent such application programs from having to directly link to certain COMMON blocks and parameter sizes internal to BUFRLIB.</li>
<li>Function MOVA2I is marked as obsolete (for future removal from BUFRLIB). It is present in the W3 Libraries (in C language) and is no longer called by any BUFR Archive Library routines. A warning message is now printed instructing users to migrate to MOVA2I in the W3 Libraries.</li>
<li>Subroutine UFBTAB was modified to work for compressed BUFR messages. An option to return only the subset count (when the input unit number is less than zero) was also added.</li>
<li>Subroutine COPYSB was modified to now write out a compressed subset/message if the input subset/message is compressed (before this subroutine could only write out an uncompressed subset/message regardless of the compression status of the input subset/message).</li>
</ul>
<h1><a class="anchor" id="autotoc_md40"></a>
December 21, 2004</h1>
<ul>
<li>New subroutines ISTDESC, RESTD, WRDESC, CADN30, STDMSG and STNDRD have been added to provide the capability to expand Section 3 of output BUFR messages until they are completely "standard" according to the WMO FM-94 regulations. The logic is activated via an initial call to STDMSG.</li>
<li>Subroutine XMSGINI has been removed. It had been included in a previous BUFRLIB version as an indirect way of "standardizing" compressed messages, but the same logic is now fully integrated into CMSGINI and is activated via a separate initial call to new subroutine STDMSG (see 1).</li>
<li>Subroutine STANDARD has been marked as obsolete (for future removal from BUFRLIB) in favor of a new subroutine STNDRD which more completely "standardizes" Section 3. The old subroutine (i.e. STANDARD) would always just break down the top-level Table A descriptor by one level, so that, unless this "one level deep" expansion happened to consist of all standard descriptors, the resulting BUFR message was still non-standard. Contrarily, the new logic will recursively break down successive sequence descriptors for as long as needed until all appearing in Section 3 are themselves standard or else, at a minimum, preceded with the 206YYY "bypass" operator (note: this recursive logic is written using C for portability reasons, since not all FORTRAN 77 compilers support recursion!). In addition, STNDRD has other advantages over STANDARD as well; namely, it contains safety checks which prevent overflow of the message array that is passed to it, and it also is more directly integrated into BUFRLIB and can be automatically activated in-line via a separate initial call to new subroutine STDMSG (see 1).</li>
<li>Subroutine WRITSA was modified to fix a bug which, in certain situations, prevented one or more BUFR messages from being returned to the calling program within the memory arrays. In addition, a new subroutine WRITCA was added which functions exactly like WRITSA except that it works on compressed messages.</li>
<li>Subroutines WRCMPS and RDCMPS were modified to fix a bug in the compression algorithm which occurred when all subsets in a single message contained identical character strings. Separate corrections were also made to each of these subroutines to fix a few unrelated minor bugs.</li>
<li>Subroutine UFDUMP was modified to add a fuzziness test for the "missing" value and to add an interactive, scrolling print capability similar to UFBDMP.</li>
<li>Subroutine UFBDMP was modified to automatically use READLC when reading "long" character strings, similar to an existing capability within UFDUMP.</li>
<li>Documentation was improved and/or clarified in many existing subroutines throughout BUFRLIB.</li>
<li>Subroutines COMPRES and READ2C have been removed. The same functionality can be obtained by using subroutine WRITCP.</li>
<li>Subroutines IREADERS, READERS and READTJ have been removed, as they were nothing more than wrappers for READMG and had been marked as obsolete within a previous BUFRLIB version.</li>
<li>Subroutines READERM, IREADERM and IRDERM have been removed. They had been superseded functionally by (the more-portable!) subroutine READIBM and had been marked as obsolete within a previous BUFRLIB version.</li>
<li>Parameter MXMSGL (the maximum number of bytes in a BUFR message) was increased from 20K TO 50K bytes in the following subroutines: BFRINI, CKTABA, CLOSMG, CMSGINI, COPYBF, COPYMG, COPYSB, CPYMEM, CPYUPD, DXMINI, MAXOUT, MESGBC, MESGBF, MINIMG, MSGINI, MSGUPD, MSGWRT, NMBYT, POSAPN, POSAPX, RCSTPL, RDBFDX, RDCMPS, RDMEMM, RDMEMS, RDMGSB, RDTREE, READERME, READFT, READIBM, READLC, READMG, READMM, READSB, REWNBF, SUBUPD, UFBGET, UFBINX, UFBMEM, UFBTAB, UFBTAM, WRCMPS, WRITDX, WRITLC, WRITSA and WRTREE. (Note: this is not included in the Docblock history in these routines.)</li>
<li>Subroutines READERME, READIBM, DATEBF and DUMPBF were modified to make the test for the string 'BUFR' portable to EBCDIC machines.</li>
<li>Subroutine WRTREE was modified to use double-precision arithmetic within an internal statement function, in order to correct for a truncation problem that could occur in the case of very large computed values.</li>
<li>Subroutine COPYST has been marked as obsolete (for future removal from BUFRLIB). The same functionality can be obtained by calling new subroutine STDMSG, followed by a call to COPYMG.</li>
<li>Subroutine WRITST has been marked as obsolete (for future removal from BUFRLIB). The same functionality can be obtained by calling new subroutine STDMSG, followed by a call to CLOSMG.</li>
<li>A new option IO="NODX" has been added to subroutine OPENBF. In this case, the subroutine behaves exactly as if it had been called with IO="OUT", except that DX dictionary messages are not written out to logical unit LUNIT.</li>
<li>Subroutine WRDLEN was modified to keep track of whether it has already been called by one of the other BUFRLIB subroutines and, if so, to then immediately return (without proceeding any further) every time it is subsequently called.</li>
<li>Subroutines OPENBF, UFBINT, UFBOVR, UFBREP, UFBSEQ, UFBSTP and WRDLEN were all modified to fix similar portability bugs whereby the values of some internal variable(s) which keep track of whether the subroutine has already been called were not being explicitly preserved with a SAVE statement.</li>
<li>New subroutine PKVS1 was added which calls OVRBS1 in an in-line fashion and therefore allows easier overwriting of default values in Section 1 of output BUFR messages. The new methodology can also overwrite the value of byte 8 in Section 0 (i.e. BUFR edition number) if desired.</li>
<li>New function IUPVS1 was added which calls IUPBS1 in an in-line fashion and therefore allows easy unpacking of Section 1 values from BUFR messages that have already been read into the internal memory arrays by subroutine READMG or equivalent. The new methodology can also unpack the value of byte 8 in Section 0 (i.e. BUFR edition number) if desired.</li>
<li>Subroutine ADDATE was modified to fix a bug in calculating the number of days in February for years which are multiples of 100 but not of 400.</li>
<li>Subroutine MESGBC was modified to allow the option of operating on a BUFR message that has already been read into the internal memory arrays by subroutine READMG or equivalent.</li>
<li>New subroutine DXDUMP was added which outputs an ASCII-formatted copy of the information embedded within the DX dictionary messages of a BUFR file. It is especially useful for learning the contents of archived BUFR files, and the output is in a format suitable for subsequent input to OPENBF as a user-defined dictionary tables file.</li>
<li>Subroutines DATELEN, DATEBF and DUMPBF were all modified to call subroutine WRDLEN to initialize local machine information (in case it has not already been called). These routines do not require this information but they may now or someday call other routines that do require it.</li>
</ul>
<h1><a class="anchor" id="autotoc_md41"></a>
November 4, 2003</h1>
<p>This is the first "unified" BUFR Archive Library including components from the regular NCEP production machine version (whose implementation history is documented to this point), the decoder version (previously on a workstation but now on the IBM Frost and Snow machines), and a checkout NCEP/EMC grid-to-obs verification version. This version is portable to all platforms (as necessary for WRF), contains docblocks for each routine with a complete program history log, and outputs more complete diagnostic information when routines terminate abnormally, unusual things happen or for informational purposes.</p>
<p>The following libraries are now generated on the NCEP IBM Frost and Snow machines:</p>
<ul>
<li>libbufr_4_64.a &ndash; 4-byte reals, 4-byte integers, 64-bit executable compilation</li>
<li>libbufr_8_64.a &ndash; 8-byte reals, 8-byte integers, 64-bit executable compilation</li>
<li>libbufr_d_64.a &ndash; 8-byte reals, 4-byte integers, 64-bit executable compilation</li>
<li>libbufr_4_32.a &ndash; 4-byte reals, 4-byte integers, 32-bit executable compilation</li>
</ul>
<p>The first three are compiled exactly the same as the three libraries noted in the previous 05-27-2003 implementation (they are just renamed). The fourth library is compiled identically to the previous decoder-specific version on Frost and Snow (libdecod_bufr_32.a). It is compiled with optimization level 3 (-O3) for both Fortran and c routines and will be linked into the production decoder programs in place of libdecod_bufr_32.a.</p>
<p>The following routines have been added to the BUFR archive library:</p>
<ul>
<li>Subroutine BORT2 which prints (to STDOUT) two given error strings and then calls BORT_EXIT (see 7 below) to abort the application program calling the BUFR Archive Library software. It is similar to existing subroutine BORT, except BORT prints only one error string.</li>
<li>Function IUPBS1 which, given a BUFR message contained within array MBAY, unpacks and returns the binary integer contained within byte NBYT of Section 1 of the BUFR message. This was present in the original decoder- specific version of the library.</li>
<li>Subroutine OVRBS1 which, given a BUFR message contained within array MBAY, packs and stores the value of a binary integer into byte NBYT of Section 1 of the BUFR message, overwriting the value previously stored there.</li>
<li>Subroutine UPDS3 which, given a BUFR message contained within array MBAY, unpacks and returns the descriptors contained within Section 3 of the BUFR message. This was present in the original decoder-specific version of the library.</li>
<li>New library function MOVA2I replaces the W3LIB c-version previously called by DATEBF and DUMPBF. It is now called by new subroutines MESGBC (see 6) and REWNBF (see 11) as well. This change removes any dependency upon the W3LIB, since no other BUFR Archive Library routines call any W3LIB routines. It was converted to Fortran 77 because the c-version does not work properly when compiled with 32-bit executable compilation and linked into a Fortran source copiled with 8-byte real and integer word length.</li>
<li>Subroutine MESGBC reads past any BUFR table (dictionary) or dummy (center or dump time in dump files) messages in a BUFR file (if there are any) and returns the message type for the first report data message found. It also determines whether or not this first report data message is compressed BUFR. This subroutine is identical to MESGBF except MESGBF only reads past dictionary messages and MESGBF does not return any information about compression.</li>
<li>C subroutine BORT_EXIT terminates the application program calling the BUFR software and returns an implementation-defined non-zero status code to the executing shell script. (See 1 and 26.)</li>
<li>Subroutine RDMGSB opens a BUFR file in logical unit LUNIT for input operations, then reads a particular subset into internal subset arrays from a particular BUFR message in a message buffer. This is based on the subset number in the message and the message number in the BUFR file. This was present in the original verification-specific version of the library.</li>
<li>Subroutine SUBUPD packs up the current subset within memory and then tries to add it to the BUFR message that is currently open within memory for LUNIT. If the subset will not fit into the currently open message, then that message is flushed to LUNIT and a new one is created in order to hold the current subset. If the subset is larger than an empty message, the subset is discarded and a diagnostic is printed. This subroutine is identical to existing BUFR Archive Library subroutine MSGUPD except SUBUPD does NOT pad the packed subset. This was present in the original verification-specific version of the library.</li>
<li>Subroutine UFBINX either opens a BUFR file for input operations (if it is not already opened as such), or saves its position and rewinds it to the first data message (if BUFR file already opened), then (via a call to BUFR Archive Library subroutine UFBINT) reads specified values from internal subset arrays associated with a particular subset from a particular BUFR message in a message buffer. The particular subset and BUFR message are based based on the subset number in the message and the message number in the BUFR file. Finally, this subroutine either closes the BUFR file (if is was opened here) or restores it to its previous read/write status and position (if is was not opened here). This was present in the original verification-specific version of the library.</li>
<li>Subroutine REWNBF which will either: 1) store the current parameters associated with a BUFR file (read/write pointers, etc.), set the file status to read, then rewind the BUFR file and position it such that the next BUFR message read will be the first message in the file containing actual subsets with data; or 2) restore the BUFR file to the parameters it had prior to 1) using the information saved in 1). This allows information to be extracted from a particular subset in a BUFR file which is in the midst of being read from or written to by an application program. This was present in the original verification-specific version of the library.</li>
<li>Subroutine UFBIN3 reads specified values from the current BUFR data subset where the data values correspond to mnemonics which are part of a multiple- replication "level" sequence within another multiple-replication "event stack" sequence. This subroutine is designed to read event information from "PREPFITS" type BUFR files (currently the only application which reads PREPFITS files is the verification program GRIDTOBS, where UFBIN3 was previously an in-line subroutine). The existing analogous subroutine UFBEVN should be used to read information from "PREPBUFR" type BUFR files. This was present in the original verification-specific version of the library.</li>
<li>Function NEVN accumulates all data events for a particular data value and level and returns them to the calling program. The value of the function itself is the total number of events found. {This function should only be called by UFBIN3 (see 12), which, itself, is called only by verification application program GRIDTOBS, where it was previously an in-line subroutine. In general, NEVN does not work properly in other application programs at this time.} This was present in the original verification-specific version of the library.</li>
<li>Subroutine READLC returns a character data element associated with a particular subset mnemonic from the internal message buffer. It is designed to be used to return character elements greater than the usual length of 8 bytes. It currently will not work for compressed BUFR mesaages.</li>
<li>Subroutine WRITLC packs a character data element associated with a particular subset mnemonic from the internal message buffer. It is designed to be used to store character elements greater than the usual length of 8 bytes.</li>
<li>Subroutine WRITST generates a standardized version of the current BUFR message in internal memory and writes it to the output file (not sure if it works properly).</li>
<li>Subroutine COPYST generates a standardized version of the current BUFR message read using READMG and writes it intact as a record to the output file.</li>
<li>Subroutine COMPRES compresses subsets in BUFR messages previously read using BUFR Archive Library subroutine READMG or equivalent. It then generates a new bufr message consisting of the compressed subsets. Note that subsets in the output compressed message may have been read from different (adjacent) input messages. Currently the only application program which calls this subroutine is BUFR_COMPRESS, where COMPRES was previously an in-line subroutine).</li>
</ul>
<p>The following routines in the BUFR archive library have been modified:</p>
<ul>
<li>Subroutine READ2C reads a subset into compression maxtrix arrays in preparation for generating compressed BUFR messages. This had been an in- line subroutine in the application program BUFR_COMPRESS and is currently called only by BUFR Archive Library subroutine COMPRES (see 18).</li>
<li>Subroutine UPBB modified to make certain zero is returned for zero bits input and to make logic consistent with logic in UPB. (See also 30 for UPBB.)</li>
<li>Subroutine UFBTAB modified to not abort when there are too many subsets coming in (i.e., .gt. array limit passed in), but rather to just process the limiting number of reports and print a diagnostic. It is also modified to call subroutine REWNBF when the BUFR file is already opened (this is taken from the verification version of UFBTAB and allows specific subset information to be read from a file in the midst of being read from or written to), before OPENBF was always called and this would have led to an abort of the application program. (See also 29 for UFBTAB.)</li>
<li>Subroutine CKTABA modified to not abort when the Section 1 message subtype does not agree with the Section 1 message subtype in the dictionary IF the message type mnemonic is not of the form "NCtttsss", where ttt is the BUFR type and sss is the BUFR subtype. This allows program PREPOBS_PREPDATA to specify different message subtypes for the same message type. (See also 27 and 43.)</li>
<li>Subroutine OPENBF modified to accept 'NUL' as the second (I/O) argument. IO='NUL' prevents the BUFR Archive Library software from actually trying to access or write to the BUFR file (designed only for use with library subroutine WRITSA). This was present in the original decoder-specific version of the library.</li>
<li>Subroutine CLOSBF modified to not close the BUFR file if it was opened as 'NUL' by OPENBF (see 23). This was present in the original decoder-specific version of the library.</li>
<li>Subroutine MSGWRT modified to not write to the BUFR file if it was opened as 'NUL' by OPENBF (see 23). This was present in the original decoder- specific version of the library.</li>
<li>Subroutine BORT modified to call new BUFR Archive Library subroutine BORT_EXIT (see 7 above) rather than c function EXIT with argument 49 {"CALL
EXIT(49)"}. Since EXIT is an intrinsic c function, it expects arguments to be passed by value rather than by reference as in done in Fortran. This has caused an unpredictable status code to be passed back to the executing shell script, in some cases even ZERO!! This change will ensure an non-zero status is always returned.</li>
<li>Suboutines CKTABA, DATEBF, DUMPBF and function I4DY modified such that date calculations no longer use floating point arithmetic. This can lead to round off error and an improper resulting date on some machines (e.g., NCEP IBM Frost/Snow). This change increases portability of the BUFR Archive Library. (See also 22 and 43 for CKTABA.)</li>
<li>Parameter MAXMSG (the maximum number of BUFR messages which can be stored internally) increased from 50000 to 200000 in the following subroutines: CPYMEM, RDMEMM, RDMEMS, READMM, UFBMEM, UFBMMS, UFBMNS, UFBRMS and UFBTAM. This may be necessary in the future for BUFR files with many, many messages.</li>
<li>Parameter MAXJL (the maximum number of Jump/Link table entries) increased from 15000 to 16000 in the following routines: BFRINI, CONWIN, COPYMG, CPYMEM, DRFINI, DRSTPL, GETWIN, INCTAB, INVCON, INVMRG, INVTAG, INVWIN, LSTJPB, LSTRPC, LSTRPS, MAKESTAB, MSGINI, NEWWIN, NVNWIN, NWORDS, NXTWIN, PARUTG, RCSTPL, RDCMPS, RDTREE, READNS, TABENT, TABSUB, TRYBUMP, UFBCPY, UFBCUP, UFBDMP, UFBEVN, UFBGET, UFBINT, UFBOVR, UFBREP, UFBRP, UFBRW, UFBSEQ, UFBSP, UFBSTP, UFBTAB, UFBTAM, UFDUMP, USRTPL, WRCMPS and WRTREE. This was present in the original verification-specific version of the library.</li>
<li>The following routines are modified to make the BUFR Archive Library big-endian/little-endian independent: IPKM, IUPM, PKB, PKC, UPB and UPBB. This was present in the original decoder-specific version of the library and increases the portability of the BUFR Archive Library.</li>
<li>Subroutine BFRINI modified to initialize variable JSR as ZERO in new COMMON block /BUFRSR/. This was present in the original verification-specific version of the library. (See also 29 for BFRINI.)</li>
<li>Subroutine RCSTPL modified to increase the maximum number of levels of recursion (parameter MAXRCR) from 50 to 100. This was present in the original verification-specific version of the library. (See also 29 and 43 for RCSTPL.)</li>
<li>Subroutine WRCMPS modified to save logical variables WRIT1 and FLUSH in global memory. This fixed a bug in this subroutine which could lead to messages being written out before being full. (See also 29 for WRCMPS.)</li>
<li>Subroutine RDTREE modified to fix a bug which could only occur when the last element in a subset is a character. (See also 29 for RDTREE.)</li>
<li>Subroutine UFDUMP modified to handle print of character values greater than 8 bytes. (See also 29 for UFDUMP.)</li>
<li>Subroutine UFBEVN modified to save the maximum number of events found for all data values specified amongst all levels returned as variable MAXEVN in new COMMON block /UFBN3C/ and to add call to BORT if BUFR file is open for output. (See also 29 for UFBEVN.)</li>
<li>Subroutine NEMOCK modified to expand non-zero return into -1 for length not 1-8 characters and -2 for invalid characters (return only -1 before for all problematic cases)</li>
<li>Subroutine NUMBCK modified to expand non-zero return into -1 for invalid character in position 1, -2 for invalid characters in positions 2 through 6, -3 for invalid characters in positions 2 and 3 due to being out of range, and -4 for invalid characters in positions 4 through 6 due to being out of range (return only -1 before for all probelmatic cases)</li>
<li>Subroutine WTSTAT modified to correct a "typo" in test for valid value for "IM".</li>
<li>Subroutines ELEMDX, PARSEQ, PARUSR, PARUTG, PKC, RDUSDX, SEQSDX, STRING, UFBINT, UFBOVR, UFBREP, UFBSTP and VALX modified to call new BUFR Archive Library subroutine BORT2 (see 1).</li>
<li>Subroutine MAKESTAB modified to allow for the possibility that a connected file may not contain any dictionary table info (e.g., an empty file). Subsequent connected files which are not empty will no longer get tripped up by this. (This change avoids the need for an application program to disconnect any empty files via a call to CLOSBF.) (See also 29 for MAKESTAB.)</li>
<li>Subroutine READTJ modified to simply call BUFR Archive Library subroutine READMG rather than being a clone of it. At one time it performed different functions than READMG, but that has not been the case since the 2000-09-19 BUFR Archive Library implementation.</li>
<li>Subroutines CKTABA, CMSGINI, NUMTAB, PARUSR, PARUTG, RCSTPL, USRTPL, WRDLEN, WRTREE and XMSGINI modified to correct some minor bugs (uninitialized variables, etc.) (see subroutine DOCBLOCKS for more information). (See also 29 for PARUTG, RCSTPL, USRTPL, WRTREE and 32 for RCSTPL.)</li>
<li>Subroutine UFBDMP modified to add "fuzziness" about 10E10 in test for a missing value (rather than true equality as before) because some missing values (e.g., character strings &lt; 8 characters) were not getting stamped out as "MISSING". Also added option to print values using format edit descriptor "F15.6" if input argument LUNIN is &lt; zero. If LUNIN is &gt; zero edit descriptor expanded from "G10.3" to "G15.6". (See also 29 for UFBDMP.)</li>
</ul>
<h1><a class="anchor" id="autotoc_md42"></a>
May 19, 2003</h1>
<p>The following changes have been made in the BUFR Archive Library:</p>
<ul>
<li>Subroutine CLOSMG - to correct a problem introduced in the previous (May 2002) implementation which prevented the dump center time and initiation time messages from being written out (affected program BUFR_DUMPMD, if it were recompiled, in the data dumping process)</li>
<li>Subroutine UFBREP - to work properly for descriptors tied to a pivot descriptor in delayed replicated sequences (involved disabling the parsing switch which controlled checking for presence in the same replication group - UFBREP does not need this check, and it interferes with what UFBREP can do otherwise)</li>
<li>Subroutine UFBSEQ - to fix cases where delayed replication is at end of subset, or when a requested sequence is missing; also corrected the logic array of exit conditions for the subroutine, previously, in some cases, proper exits were missed, generating bogus error messages, because of several miscellaneous bugs which are now removed</li>
<li>Subroutine UPB - to make certain zero is returned for zero bits input</li>
<li>The following subroutines are modified to replace calls to Fortran Insrinsic Function ICHAR with calls to NCEP W3LIB c-function MOVA2I: DATEBF and DUMPBF. This change increases portability of the BUFR Archive Library because MOVA2I copies a bit string from a Character*1 variable to an integer variable. It is intended to replace the Fortran Intrinsic Function ICHAR, which only supports 0 &lt;= ICHAR(A) &lt;= 127 on the IBM SP. If "A" is greater than 127 in the collating sequence, ICHAR(A) does not return the expected bit value. This function can be used for all values of ICHAR(A) between 0 and 255. This change increases portability of the BUFR Archive Library and is, in fact, necessary on the NCEP IBM Frost and Snow machines.</li>
</ul>
<p>The BUFR Archive Library on Frost and Snow is compiled using optimization level 4 (-O4) for Fortran routines and optimization level 3 (-O3) for c routines. The previous BUFR Archive Library on the IBM-SP's had used -O3 for the default filenames and -O4 for a second set of filenames with the string "_O4" appended to the end.</p>
<p>The following libraries are generated on the NCEP IBM Frost and Snow machines:</p>
<ul>
<li>libbufr_4.a &ndash; 4-byte reals, 4-byte integers, 64-bit executable compilation</li>
<li>libbufr_8.a &ndash; 8-byte reals, 8-byte integers, 64-bit executable compilation</li>
<li>libbufr_d.a &ndash; 8-byte reals, 4-byte integers, 64-bit executable compilation</li>
</ul>
<h1><a class="anchor" id="autotoc_md43"></a>
May 14, 2002</h1>
<p>A number of routines in the BUFR Archive Library have been modified. These changes include:</p>
<ul>
<li>Entries IREADMM, IREADNS, IREADSB, IREADERS, IREADIBM, IREADFT and ICOPYSB changed to functions. Entries MRGINV, MINIMG, DATELEN, NENUBD, NENUAA, JSTNUM, JSTCHR and READERS changed to subroutines (note that READERS now simply calls READSB since it was an entry point at the top of READSB and was thus already an alias to it). Converted all entry points to subroutines or functions in order to increase portability to other platforms (e.g., the NESDIS CEMSCS machine).</li>
<li>Entries DXMINA, DXMINB, DXMIND and SUBUPD removed because they are obsolete.</li>
<li>Added XMSGINI for capacity to expand section three. XMSGINI has the capacity to write a fully expanded section three descriptor set into BUFR messages. Created specifically for NESDIS so they can send files out without local sequence descriptors. This "capacity" is not fully functional, it is currently activated by changing WRCMPS.to call it rather than CMSGINI, which writes sections 0,1,2,3 for compressed messages in the usual way. XMSGINI is included because it is useful for particular situations as is (aka NESDIS), and at some point could be integrated as a more direct form of STANDARDizing messages for export or whatever.</li>
<li>Included in-line compression function (subr. CMSGINI, WRITCP, WRCMPS added).</li>
<li>Improved RDCMPS and UFBSEQ for generality. Previously RDCMPS and UFBSEQ would not recognise compressed delayed replication as a legitimate data structure.</li>
<li>Removed old CRAY compiler directives in: COPYSB, CPYUPD, DRSTPL, GETWIN, INVMRG, MVB, NEWWIN, NXTWIN, RCSTPL, READSB, UFBDMP, UFBGET, UFBINT, UFBOVR, UFBRW, UFBTAB, UFBTAM and USRTPL.</li>
<li>Added new subroutine UFDUMP which is like UFBDMP, but prints subset element contents in more detail, omitting the pointers, counters, and other more esoteric information describing the internal subset structures. Each subroutine, UFBDMP and UFDUMP, is useful for different diagnostic purposes, but in general UFDUMP is more useful for just looking at the data elements.</li>
<li>Corrected error in READSB relating to certain foreign filetypes.</li>
<li>Added new subroutine DRFINI which initializes delayed replication factors, and allocates the space in the full word buffer for their contents explicitly. This is done implictly by UFBINT in a more limited way. DRFINI enables, for instance, the subsequent use of UFBSEQ to write data directly into delayed replicated sequences.</li>
<li>Added new subroutine MAXOUT which allows users to control the record length of output BUFR messages created.</li>
<li>Added new subroutine NUMTBD which is used by XMSGINI, in expanding the section 3 descriptor list.</li>
<li>Added new subroutine CAPIT which capitalizes a string of characters. This enables the use of mixed case in the unit section of the ASCII BUFR tables. An example; a program which generates an ASCII BUFR table from the "Master
Table B", might end up copying some units fields in mixed or lower case. If the units are 'Code table' or 'Flag table' or certain other unit designations, the table will be parsed incorrectly, and the data read or written incorrectly as a result. This makes sure all unit designations are seen by the parser in upper case to avoid these types of problems.</li>
<li>Removed subroutine JSTIFY because it was a dummy subroutine with two entry points for left justifying two different types of character strings. Part of conversion of entry points to separate subroutines or functions. See number 1 above.</li>
<li>Removed subroutine NENUCK because it was a dummy subroutine with two entry points for checking the BUFR mnemonic table. Part of conversion of entry points to separate subroutines or functions. See number 1 above.</li>
</ul>
<h1><a class="anchor" id="autotoc_md44"></a>
August 15, 2001</h1>
<ul>
<li>Parameter MAXMEM (the maximum number of bytes required to store all messages internally) was increased from 8 MBYTES TO 16 MBYTES in the following subroutines: CPYMEM, RDMEMM, RDMEMS, READMM, UFBMEM, UFBMMS, UFBMNS, UFBRMS and UFBTAM.</li>
<li>Subroutine UFBTAM modified to not abort when there are too many subsets coming in (i.e., .gt. array limit passed in), but rather to just process the limiting number of reports and print a diagnostic.</li>
</ul>
<h1><a class="anchor" id="autotoc_md45"></a>
September 19, 2000</h1>
<p>A number of routines in the BUFR Archive Library have been modified. These changes include:</p>
<ul>
<li>Consolidated logic that had been replicated in message decoding subroutines READMG, READFT, READTJ, READERM, READERME, RDMEMM and READIBM into a single new subroutine CKTABA (called by these subroutines). On top of this CKTABA now recognizes a variety of Section 3 formats, including compression indicators and "standard" BUFR. Thus, compressed and standard BUFR messages can now be read in via these message decoding subroutines.</li>
<li>The subset decoding subroutine READSB now calls a new subroutine RDCMPS which allows it to read subsets from compressed BUFR messages.</li>
<li>Subroutine RDTRER has been removed. It had been called by READERS to decode ERS scatterometer data from compressed BUFR messages. The change in READSB (see 2) allows READERS to be changed from a subroutine to an entry point at the top of READSB since it is now essentially an alias to READSB.</li>
<li>Subroutine UNCMPS has been removed. It had been called by READERM, READERME and READIBM to uncompress BUFR messages in foreign (i.e., standard ) BUFR files (e.g., ERS scatterometer data). This is a result of change 1 above.</li>
<li>Added capability to encode and decode data using the operator descriptors (BUFR Table C) for changing width and changing scale. Subroutines modified were: NEMTAB, NEMTBD, NUMTAB and TABSUB</li>
<li>Enlarged arrays to allow processing messages up to 20000 bytes. Routines modified were: BFRINI, CLOSMG, COPYBF, COPYMG, COPYSB, CPYMEM, CPYUPD, IRDERM, MESGBF, MINIMG, MSGINI, MSGUPD, MSGWRT, POSAPN, POSAPX, RCSTPL, RDBFDX, RDMEMM, RDMEMS, RDTREE, READERM, READERME, READFT, READIBM, READMG, READMM, READSB, READTJ, UFBGET, UFBMEM, UFBTAB, UFBTAM, WRITDX, WRITSA and WRTREE.</li>
<li>Added subroutine UFBSEQ, like UFBINT except processes specific sequences instead of specific elements.</li>
<li>Added function NMBYT, returns the number of bytes in a message opened for input.</li>
</ul>
<p>The BUFR Archive Library is now compiled using both optimization level 3 (-O3) and optimization level 4 (-O4). The previous BUFR Archive Library had used only -O4. The -O3 compilation here generates the same archive library names as before. Thus, any code that is recompiled from an unchanged makefile will now link in the appropriate -O3 library, rather than the -O4 library as before. The new -O4 libraries all have the string "_O4" appended to the end of the filename.</p>
<p>Any program that must link to the -O4 BUFR Archive Library when compiled will have to modify its makefile.</p>
<h1><a class="anchor" id="autotoc_md46"></a>
July 13, 1999</h1>
<ul>
<li>A number of routines in the BUFR Archive Library have been modified to increase the number of BUFR files which can be opened at one time from 10 to 32. This is necessary in order to process multiple BUFR files under the MPI. The following routines were modified: BFRINI, CHEKSTAB, CLOSMG, CONWIN, COPYMG, COPYSB, CPBFDX, CPYMEM, CPYUPD, DXINIT, ELEMDX, GETWIN, IFBGET, INVCON, INVMRG, INVTAG, INVWIN, LSTJPD, LSTRPC, LSTRPS, MAKESTAB, MSGINI, MSGUPD, NEMTAB, NEMTBA, NEMTBD, NENUCK, NEWWIN, NMSUB, NUMTAB, NVNWIN, NWORDS, NXTWIN, OPENBF, OPENMB, OPENMG, PARUTG, PKTDD, RCSTPL, RDBFDX, RDMEMM, RDMEMS, RDTREE, RDTRER, RDUSDX, READERM, READERME, READERS, READFT, READMG, READNS, READSB, READTJ, STATUS, STRING, TRYBUMP, UFBCNT, UFBCPY, UFBCUP, UFBDMP, UFBEVN, UFBGET, UFBINT, UFBOVR, UFBREP, UFBRP, UFBRW, UFBTAB, UFBTAM, UNCMPS, UPTDD, USRTPL, WRITDX, WRTREE, WTSTAT.</li>
<li>Subroutines READFT, READMG, and READTJ have been modified with semantic adjustments to ameliorate compiler complaints from LINUX boxes.</li>
<li>Added the new subroutine READIBM in order to process "foreign" (non-NCEP) BUFR files which may not be padded. Unlike the subroutine READERM, which performs a similar fuction, READIBM works properly on all platforms and should replace calls to READERM in application programs. (READERM does not work properly on the NCEP IBM-SP machine.)</li>
<li>Added the new subroutine NEMTBAX. It is like subroutine NEMTBA except if the requested mnemonic is not found, it returns rather than calls BORT. This is necessary to support the logic in the new BUFR Archive Library subroutine READIBM (see 3).</li>
<li>Added the new subroutine READMM. It is like subroutine RDMEMM except it advances the value of the message (record) number by one prior to returning to the calling program. This adds another option for application programs which read BUFR files in random access mode (e.g., PREPOBS_OIQCBUFR).</li>
<li>Function IREADMG has been modified to contain two new function entries called IREADMM and IREADIBM. The IREADIBM function calls the new library subroutine READIBM (see 3) and the IREADMM function calls the new library subroutine READMM (see 5).</li>
<li>RDTRER, READERM, READERME and UNCMPS have been modified to expand the maximum number of possible descriptors in a subset from 1000 to 3000.</li>
<li>The maximum number of bytes required to store all messages internally was increased from 4 Mbytes to 8 Mbytes in the following subroutines: RDMEMM, UFBMEM, UFBMMS, UFBMNS and UFBRMS.</li>
<li>The function formerly called VAL$ has been renamed to VALX to remove the possibility of the "$" symbol causing problems on other platforms. In turn subroutine NEMTBB has been modified to call function VALX rather than VAL$.</li>
<li>New subroutines UFBSTP and UFBSP added (UFBSP is called by UFBSTP).</li>
</ul>
<h1><a class="anchor" id="autotoc_md47"></a>
December 14, 1998</h1>
<ul>
<li>Subroutine MSGUPD was updated to bybass the processing of reports that are longer than the length of a BUFR message. Prior to this change, the BUFR Archive Library would issue an abort in the event of this rare, but possible occurrence which occurred at 12Z on 4 December in the RGL suite.</li>
<li>In addition, function I4DY was modified to use 20 as the 2-digit year for windowing to a 4-digit year (00-20 ==&gt; add 2000; 21-99 ==&gt; add 1900). This windowing technique was inadvertently changed to 10 in the previous implementation of the BUFR Archive Library.</li>
</ul>
<h1><a class="anchor" id="autotoc_md48"></a>
November 24, 1998</h1>
<ul>
<li>Function I4DY and subroutine MSGWRT were changed as a result of final Y2K testing of the decoder/ingest system.</li>
<li>I4DY was changed to conform to the NCEP 2-digit year time-window of 1921-2020.</li>
<li>MSGWRT was changed to zero out the padding bytes written at the end of Section 4.</li>
</ul>
<h1><a class="anchor" id="autotoc_md49"></a>
October 27, 1998</h1>
<ul>
<li>The BUFR Archive Library is being modified to correct problems caused by in-lining code with fpp directives. The following subroutines are being changed: DATEBF, MVB, RCSTPL, RDMEMS, RDTREE, RDTRER, UFBGET, UFBRW, UFBTAB, UFBTAM and UPBB.</li>
</ul>
<h1><a class="anchor" id="autotoc_md50"></a>
August 31, 1998</h1>
<ul>
<li>BUFR Archive Library subroutine DATEBF, which returns the center date-time for a BUFR data dump file, is being modified to correct an error which lead to the year being returned in the second argument as 2-digit year when a 4-digit year was requested via a prior call to subroutine DATELEN. The center date returned in the sixth argument, in the form YYYYMMDDHH, was correct in the previous version of this subroutine.</li>
</ul>
<h1><a class="anchor" id="autotoc_md51"></a>
July 8, 1998</h1>
<p>The new version of the BUFR Archive Library is Y2K compliant, with additional changes to support expanded machine independence of the code, and to refine, correct, or improve some of the routines within. Although nearly every one of library routines has some change made (mainly because of the introduction of a more general error exit subroutine), the changes largely fall into the first two categories. Three new routines were also added to the BUFR Archive Library for micellaneous puposes.</p>
<p><u>Y2K Compliance</u></p>
<p>Y2K compliance in the BUFR Archive Library is downwardly compatible. That is, the new library will read non-Y2K BUFR files as the old one does. However, all two digit years read are represented internally as four digit years, and any files written with the new library will be in Y2K format. A functional conversion of two digit year inputs assumes the years 21-99 are in the twentieth century, while years numbered 00-20 are in the twenty-first. A Y2K BUFR file is identified by a non-zero value in the 18th byte of the message section one, the century byte. At this point users of the library have access to the full four digit year values read by including a signal in their programs via a new entry point called DATELEN. The plan is to have the default set to return two digits of the year during a transition period. This allows implementation of the new BUFR Archive Library into a non-Y2K compliant environment. The susbsequent list of subroutines have been changed for Y2K compliance: BFRINI, DATEBF, DUMPBF, MSGINI, OPENMB, OPENMG, RDMEMM, READERME, READFT, READMG, READTJ.</p>
<p><u>Machine Independence</u></p>
<p>Since the last implementation of the BUFR Archive Library, several areas in the code have been identified which are problematic in some way with regards to compiling the library on some computers. Upgrades have been made to the following list of subroutines to address these: CONWIN, INVCON, PARUSR, RDTRER, READERM, READERME, TRYBUMP, UFBEVN, UFBGET, UFBINT, UFBRP, UFBRW, UFBTAB and UNCMPS.</p>
<p><u>Refinements, Corrections, and Improvements</u></p>
<p>This is a list of BUFR Archive Library routines which were either in error, or in need of some improvement: IRDERM, NEMTBB, NENUCK, RDBFDX, RDUSDX, STRCLN, STRING, TABENT, UNCMPS and WRTREE.</p>
<p><u>New Error Exit Subroutine</u></p>
<p>Many of the BUFR Archive Library routines perform internal testing during operation in order to prevent certain situation from generating mysterious aborts, or, even worse, giving the wrong answers. The original library utilized the Cray library routine ABORT to terminate a program when such a situation was found. The new library uses a new inernal subroutine, BORT, to accomplish this. The list of routines changed for this purpose is as follows: ADN30, CHEKSTAB, CLOSMG, COPYBF, COPYMG, COPYSB, CPYMEM, CPYUPD, DATEBF, DRSTPL, DUMPBF, DXMINI, ELEMDX, GETWIN, IDN30, IFBGET, INCTAB, INVMRG, IPKM, IUPM, JSTIFY, LSTJPB, LSTRPC, LSTRPS, MAKESTAB, MSGINI, MSGUPD, MSGWRT, MVB, NEMTBA, NEMTBB, NEMTBD, NENUCK, NEWWIN, NMSUB, NVNWIN, NXTWIN, OPENMB, OPENMG, OPENBF, PAD, PARSEQ, PARUSR, PARUTG, PKC, POSAPN, POSAPX, RCSTPL, RDBFDX, RDMEMM, RDMEMS, RDUSDX, READDX, READERM, READERME, READERS, READFT, READMG, READNS, READSB, READTJ, SEQSDX, STANDARD, STATUS, STRING, TABENT, TABSUB, UFBCNT, UFBCPY, UFBCUP, UFBDMP, UFBEVN, UFBGET, UFBINT, UFBMEM, UFBMMS, UFBMNS, UFBOVR, UFBQCD, UFBQCP, UFBREP, UFBRMS, UFBTAM, UPTDD, USRTPL, VAL$, WRDLEN, WRITDX, WRITSA, WRITSB, WTSTAT</p>
<p><u>New Code Added</u></p>
<p>I4DY the two/four digit year conversion function LJUST a character left justify function OPENBT A dummy entry point which is relevant to users of the READTJ subroutine</p>
<h1><a class="anchor" id="autotoc_md52"></a>
April 2, 1998</h1>
<ul>
<li>BUFR Archive Library subroutine STRCLN, which initializes the mnemonic string cache in the BUFR interface, is being modified to enlarge the cache from 50 elements to 1000, maximum.</li>
<li>BUFR Archive Library subroutine STRING manages the mnemonic string cache in the BUFR interface. The mnemonic string cache is a performance enhancing device which saves time when the same mnemonic strings are encountered in a user program, over and over again (the typical scenario). It is being modified to operate a bigger cache, and some optimization of the cache search algorithm is being made in support of a bigger cache.</li>
</ul>
<h1><a class="anchor" id="autotoc_md53"></a>
September 3, 1997</h1>
<ul>
<li>Changes are being made to the BUFR Archive Library to recompile all routines without the -ez compiler option. The removal of this debugging option should speed up the execution of all modules which are linked with BUFR Archive Library routines.</li>
<li>In addition, a new subroutine, STANDARD, is being added to the library. This subroutine "standardizes" NCEP BUFR messages for transmission. It was requested to process hurricane location data.</li>
</ul>
<h1><a class="anchor" id="autotoc_md54"></a>
July 29, 1997</h1>
<ul>
<li>Three BUFR Archive Library subroutines were modified to update the current BUFR version information written into Section 0 of each message: DXMINI, MSGINI and MSGWRT. Version 3 replaces version 2.</li>
<li>Three additional subroutines were modified to enable them to process GOES soundings from NESDIS: IRDERM, RDTRER and READERME.</li>
</ul>
<h1><a class="anchor" id="autotoc_md55"></a>
December 17, 1996</h1>
<p>The BUFR Archive Library was modified to make the following changes:</p>
<ul>
<li>DUMPBF - Corrected error in dump date reader.</li>
<li>RDUSDX - Fixed for some MVS compiler's treatment of internal reads.</li>
<li>RDBFDX - Fixed for some MVS compiler's treatment of internal reads.</li>
<li>UFBINT - Modified to always initialize "USR" array to missing (10E10) when BUFR file is being read.</li>
</ul>
<h1><a class="anchor" id="autotoc_md56"></a>
December 11, 1996</h1>
<p>The following subroutines were modified in the BUFR Archive Library:</p>
<ul>
<li>STATUS - Fixed a long standing bug which occurs in unusual situations. Very low impact.</li>
<li>UFBINT - Removed a hard abort for users who try to write non-existing mnemonics.</li>
<li>UFBRW - Removed a hard abort for users who try to write non-existing mnemonics.</li>
<li>ADDATE - New date arithmetic subroutine added to the library.</li>
<li>DUMPBF - New dump date reader added to the library.</li>
<li>MSGINI - Modified to allow inclusion of minutes in writing the message date into a BUFR message.</li>
<li>READTJ - Specific database ingest message reader added to the library which can attach different BUFR tables if the message type is not recognized in the current ones. Works with a user subroutine called OPENBT which specifies the location(s) of different tables.</li>
</ul>
<h1><a class="anchor" id="autotoc_md57"></a>
November 25, 1996</h1>
<p>Several routines in the BUFR Archive Library are being modified to provide more machine independence. The data merging routine is being modified for radiosonde call signs, a return code is being added to UFBINT when mnemonics are not found, and READMG is being modified to exit gracefully when the file is positioned after an end of file</p>
<h1><a class="anchor" id="autotoc_md58"></a>
October 9, 1996</h1>
<p>The BUFR Archive Library was modified to include 9 additional routines to process ERS scatterometer data (IREADERS, RDTRER, READERS, UNCMPS), perform fault tolerant reading (IREADFT, READFT), and support report part merging (INVMRG, MRGINV, NWORDS).</p>
<h1><a class="anchor" id="autotoc_md59"></a>
September 9, 1996</h1>
<p>The BUFR Archive Library was separated into 121 BUFR interface routines, which include upgrades and devices for operating the BUFR database.</p>
<h1><a class="anchor" id="autotoc_md60"></a>
June 28, 1995</h1>
<p>The BUFR Archive Library was modified to increase the size of internal arrays in order to handle bigger files. Coding was also added in order to process ERS scatterometer data which is input from compressed BUFR messages (new subroutine READERME).</p>
<h1><a class="anchor" id="autotoc_md61"></a>
January 10, 1995</h1>
<p>The BUFR Archive Library was modified slightly to allow for changes in the AVN and FNL PREPBUFR and Q.C. Processing codes (PREPDATA, CQCBUFR, OIQCBUFR, SSIANL).</p>
<h1><a class="anchor" id="autotoc_md62"></a>
Original Implementation of BUFR Archive Library - January 6, 1994</h1>
<p>Implemented on Cray-YMP as a single monolithic source bufr.f. Only the AVN and FNL PREPBUFR processing and q.c. codes used the BUFR Archive Library initially. These were: PREPDATA, SYNDATA, CQCBUFR, OIQCBUFR, and SSIANL. These had actually been implemented with a non-production version of the library in Jack Woollen's directory September 21, 1993. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
